{"version":3,"file":"index.es.js","sources":["../node_modules/warning/warning.js","../node_modules/@reach/utils/dist/utils.esm.js","../node_modules/@reach/auto-id/dist/auto-id.esm.js","../node_modules/style-inject/dist/style-inject.es.js","../node_modules/react-portal/es/utils.js","../node_modules/react-portal/es/Portal.js","../node_modules/react-portal/es/LegacyPortal.js","../node_modules/react-portal/es/PortalCompat.js","../node_modules/react-portal/es/PortalWithState.js","../node_modules/lodash/_baseClamp.js","../node_modules/lodash/_trimmedEndIndex.js","../node_modules/lodash/_baseTrim.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/clamp.js","../node_modules/nanoid/non-secure/index.js","../src/components/ContextMenu/ContextMenu.js","../src/context.js","../src/components/Draggable/Draggable.js","../node_modules/lodash/_arrayMap.js","../node_modules/lodash/isArray.js","../node_modules/lodash/_isKey.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/eq.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_Map.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/memoize.js","../node_modules/lodash/_memoizeCapped.js","../node_modules/lodash/_stringToPath.js","../node_modules/lodash/_baseToString.js","../node_modules/lodash/toString.js","../node_modules/lodash/_castPath.js","../node_modules/lodash/_toKey.js","../node_modules/lodash/_baseGet.js","../node_modules/lodash/_stackClear.js","../node_modules/lodash/_stackDelete.js","../node_modules/lodash/_stackGet.js","../node_modules/lodash/_stackHas.js","../node_modules/lodash/_stackSet.js","../node_modules/lodash/_Stack.js","../node_modules/lodash/_setCacheAdd.js","../node_modules/lodash/_setCacheHas.js","../node_modules/lodash/_SetCache.js","../node_modules/lodash/_arraySome.js","../node_modules/lodash/_cacheHas.js","../node_modules/lodash/_equalArrays.js","../node_modules/lodash/_Uint8Array.js","../node_modules/lodash/_mapToArray.js","../node_modules/lodash/_setToArray.js","../node_modules/lodash/_equalByTag.js","../node_modules/lodash/_arrayPush.js","../node_modules/lodash/_baseGetAllKeys.js","../node_modules/lodash/_arrayFilter.js","../node_modules/lodash/stubArray.js","../node_modules/lodash/_getSymbols.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/lodash/isArguments.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/isBuffer.js","../node_modules/lodash/_isIndex.js","../node_modules/lodash/isLength.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_nodeUtil.js","../node_modules/lodash/isTypedArray.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_nativeKeys.js","../node_modules/lodash/_baseKeys.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/keys.js","../node_modules/lodash/_getAllKeys.js","../node_modules/lodash/_equalObjects.js","../node_modules/lodash/_DataView.js","../node_modules/lodash/_Promise.js","../node_modules/lodash/_Set.js","../node_modules/lodash/_WeakMap.js","../node_modules/lodash/_getTag.js","../node_modules/lodash/_baseIsEqualDeep.js","../node_modules/lodash/_baseIsEqual.js","../node_modules/lodash/_baseIsMatch.js","../node_modules/lodash/_isStrictComparable.js","../node_modules/lodash/_getMatchData.js","../node_modules/lodash/_matchesStrictComparable.js","../node_modules/lodash/_baseMatches.js","../node_modules/lodash/get.js","../node_modules/lodash/_baseHasIn.js","../node_modules/lodash/_hasPath.js","../node_modules/lodash/hasIn.js","../node_modules/lodash/_baseMatchesProperty.js","../node_modules/lodash/identity.js","../node_modules/lodash/_baseProperty.js","../node_modules/lodash/_basePropertyDeep.js","../node_modules/lodash/property.js","../node_modules/lodash/_baseIteratee.js","../node_modules/lodash/_createBaseFor.js","../node_modules/lodash/_baseFor.js","../node_modules/lodash/_baseForOwn.js","../node_modules/lodash/_createBaseEach.js","../node_modules/lodash/_baseEach.js","../node_modules/lodash/_baseMap.js","../node_modules/lodash/_baseSortBy.js","../node_modules/lodash/_compareAscending.js","../node_modules/lodash/_compareMultiple.js","../node_modules/lodash/_baseOrderBy.js","../node_modules/lodash/orderBy.js","../src/constants.js","../src/components/Stage/Stage.js","../node_modules/d3-path/src/path.js","../node_modules/d3-shape/src/constant.js","../node_modules/d3-shape/src/math.js","../node_modules/d3-shape/src/curve/linear.js","../node_modules/d3-shape/src/point.js","../node_modules/d3-shape/src/line.js","../node_modules/d3-shape/src/curve/basis.js","../node_modules/d3-shape/src/curve/monotone.js","../src/connectionCalculator.js","../src/components/Checkbox/Checkbox.js","../src/components/TextInput/TextInput.js","../src/components/Select/Select.js","../src/components/Control/Control.js","../src/components/Connection/Connection.js","../src/hooks/usePrevious.js","../src/components/IoPorts/IoPorts.js","../src/components/Node/Node.js","../src/typeBuilders.js","../src/components/ColorPicker/ColorPicker.js","../src/components/Comment/Comment.js","../src/components/Toaster/Toaster.js","../src/components/Connections/Connections.js","../src/utilities.js","../src/nodesReducer.js","../src/commentsReducer.js","../src/toastsReducer.js","../src/stageReducer.js","../src/Cache.js","../src/RootEngine.js","../src/index.js"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' +\n      format.replace(/%s/g, function() {\n        return args[argIndex++];\n      });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  }\n\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n          '`warning(condition, format, ...args)` requires a warning ' +\n          'message argument'\n      );\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;\n","import React, { isValidElement, cloneElement, createContext, useRef, useState, useCallback, useEffect, useMemo } from 'react';\nexport { default as warning } from 'warning';\n\n/* eslint-disable no-restricted-globals, eqeqeq  */\n/**\r\n * React currently throws a warning when using useLayoutEffect on the server.\r\n * To get around it, we can conditionally useEffect on the server (no-op) and\r\n * useLayoutEffect in the browser. We occasionally need useLayoutEffect to\r\n * ensure we don't get a render flash for certain operations, but we may also\r\n * need affected components to render on the server. One example is when setting\r\n * a component's descendants to retrieve their index values.\r\n *\r\n * Important to note that using this hook as an escape hatch will break the\r\n * eslint dependency warnings unless you rename the import to `useLayoutEffect`.\r\n * Use sparingly only when the effect won't effect the rendered HTML to avoid\r\n * any server/client mismatch.\r\n *\r\n * If a useLayoutEffect is needed and the result would create a mismatch, it's\r\n * likely that the component in question shouldn't be rendered on the server at\r\n * all, so a better approach would be to lazily render those in a parent\r\n * component after client-side hydration.\r\n *\r\n * TODO: We are calling useLayoutEffect in a couple of places that will likely\r\n * cause some issues for SSR users, whether the warning shows or not. Audit and\r\n * fix these.\r\n *\r\n * https://gist.github.com/gaearon/e7d97cdf38a2907924ea12e4ebdf3c85\r\n * https://github.com/reduxjs/react-redux/blob/master/src/utils/useIsomorphicLayoutEffect.js\r\n *\r\n * @param effect\r\n * @param deps\r\n */\n\nvar useIsomorphicLayoutEffect = /*#__PURE__*/canUseDOM() ? React.useLayoutEffect : React.useEffect;\nvar checkedPkgs = {};\n/**\r\n * When in dev mode, checks that styles for a given @reach package are loaded.\r\n *\r\n * @param packageName Name of the package to check.\r\n * @example checkStyles(\"dialog\") will check for styles for @reach/dialog\r\n */\n// @ts-ignore\n\nvar checkStyles = noop;\n\nif (process.env.NODE_ENV !== \"production\") {\n  // In CJS files, process.env.NODE_ENV is stripped from our build, but we need\n  // it to prevent style checks from clogging up user logs while testing.\n  // This is a workaround until we can tweak the build a bit to accommodate.\n  var _ref = typeof process !== \"undefined\" ? process : {\n    env: {\n      NODE_ENV: \"development\"\n    }\n  },\n      env = _ref.env;\n\n  checkStyles = function checkStyles(packageName) {\n    // only check once per package\n    if (checkedPkgs[packageName]) return;\n    checkedPkgs[packageName] = true;\n\n    if (env.NODE_ENV !== \"test\" && parseInt(window.getComputedStyle(document.body).getPropertyValue(\"--reach-\" + packageName), 10) !== 1) {\n      console.warn(\"@reach/\" + packageName + \" styles not found. If you are using a bundler like webpack or parcel include this in the entry file of your app before any of your own styles:\\n\\n    import \\\"@reach/\" + packageName + \"/styles.css\\\";\\n\\n  Otherwise you'll need to include them some other way:\\n\\n    <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"node_modules/@reach/\" + packageName + \"/styles.css\\\" />\\n\\n  For more information visit https://ui.reach.tech/styling.\\n  \");\n    }\n  };\n}\n/**\r\n * Ponyfill for the global object in some environments.\r\n *\r\n * @link https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\r\n */\n\nvar ponyfillGlobal = typeof window != \"undefined\" && window.Math == Math ? window : typeof self != \"undefined\" && self.Math == Math ? self :\n/*#__PURE__*/\n// eslint-disable-next-line no-new-func\nFunction(\"return this\")();\n/**\r\n * Passes or assigns an arbitrary value to a ref function or object.\r\n *\r\n * @param ref\r\n * @param value\r\n */\n\nfunction assignRef(ref, value) {\n  if (ref == null) return;\n\n  if (isFunction(ref)) {\n    ref(value);\n  } else {\n    try {\n      ref.current = value;\n    } catch (error) {\n      throw new Error(\"Cannot assign value \\\"\" + value + \"\\\" to ref \\\"\" + ref + \"\\\"\");\n    }\n  }\n}\n/**\r\n * Checks true|\"true\" vs false|\"false\"\r\n *\r\n * @param value\r\n */\n\nfunction boolOrBoolString(value) {\n  return value === \"true\" ? true : isBoolean(value) ? value : false;\n}\nfunction canUseDOM() {\n  return !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\n}\n/**\r\n * Type-safe clone element\r\n *\r\n * @param element\r\n * @param props\r\n * @param children\r\n */\n\nfunction cloneValidElement(element, props) {\n  for (var _len = arguments.length, children = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    children[_key - 2] = arguments[_key];\n  }\n\n  return isValidElement(element) ? cloneElement.apply(void 0, [element, props].concat(children)) : element;\n}\nfunction createNamedContext(name, defaultValue) {\n  var Ctx = createContext(defaultValue);\n  Ctx.displayName = name;\n  return Ctx;\n}\n/**\r\n * This is a hack for sure. The thing is, getting a component to intelligently\r\n * infer props based on a component or JSX string passed into an `as` prop is\r\n * kind of a huge pain. Getting it to work and satisfy the constraints of\r\n * `forwardRef` seems dang near impossible. To avoid needing to do this awkward\r\n * type song-and-dance every time we want to forward a ref into a component\r\n * that accepts an `as` prop, we abstract all of that mess to this function for\r\n * the time time being.\r\n */\n\nfunction forwardRefWithAs(render) {\n  return React.forwardRef(render);\n}\nfunction memoWithAs(Component, propsAreEqual) {\n  return React.memo(Component, propsAreEqual);\n}\n/**\r\n * Get the size of the working document minus the scrollbar offset.\r\n *\r\n * @param element\r\n */\n\nfunction getDocumentDimensions(element) {\n  if (!canUseDOM()) return {\n    width: 0,\n    height: 0\n  };\n  var doc = element ? getOwnerDocument(element) : document;\n  var win = element ? getOwnerWindow(element) : window;\n  return {\n    width: doc.documentElement.clientWidth || win.innerWidth,\n    height: doc.documentElement.clientHeight || win.innerHeight\n  };\n}\n/**\r\n * Get the scoll position of the global window object relative to a given node.\r\n *\r\n * @param element\r\n */\n\nfunction getScrollPosition(element) {\n  if (!canUseDOM()) return {\n    scrollX: 0,\n    scrollY: 0\n  };\n  var win = element ? getOwnerWindow(element) : window;\n  return {\n    scrollX: win.scrollX,\n    scrollY: win.scrollY\n  };\n}\n/**\r\n * Get a computed style value by property, backwards compatible with IE\r\n * @param element\r\n * @param styleProp\r\n */\n\nfunction getElementComputedStyle(element, styleProp) {\n  var y = null;\n  var doc = getOwnerDocument(element);\n\n  if (element.currentStyle) {\n    y = element.currentStyle[styleProp];\n  } else if (doc && doc.defaultView && isFunction(doc.defaultView.getComputedStyle)) {\n    y = doc.defaultView.getComputedStyle(element, null).getPropertyValue(styleProp);\n  }\n\n  return y;\n}\n/**\r\n * Get an element's owner document. Useful when components are used in iframes\r\n * or other environments like dev tools.\r\n *\r\n * @param element\r\n */\n\nfunction getOwnerDocument(element) {\n  return element && element.ownerDocument ? element.ownerDocument : canUseDOM() ? document : null;\n}\nfunction getOwnerWindow(element) {\n  var doc = element ? getOwnerDocument(element) : null;\n  return doc ? doc.defaultView || window : null;\n}\n/**\r\n * Get the scrollbar offset distance.\r\n *\r\n * TODO: Remove in 1.0 (we used this in public examples)\r\n */\n\nfunction getScrollbarOffset() {\n  try {\n    if (window.innerWidth > document.documentElement.clientWidth) {\n      return window.innerWidth - document.documentElement.clientWidth;\n    }\n  } catch (err) {}\n\n  return 0;\n}\n/**\r\n * Checks whether or not a value is a boolean.\r\n *\r\n * @param value\r\n */\n\nfunction isBoolean(value) {\n  return typeof value === \"boolean\";\n}\n/**\r\n * Checks whether or not a value is a function.\r\n *\r\n * @param value\r\n */\n\nfunction isFunction(value) {\n  return !!(value && {}.toString.call(value) == \"[object Function]\");\n}\n/**\r\n * Checks whether or not a value is a number.\r\n *\r\n * @param value\r\n */\n\nfunction isNumber(value) {\n  return typeof value === \"number\";\n}\n/**\r\n * Detects right clicks\r\n *\r\n * @param nativeEvent\r\n */\n\nfunction isRightClick(nativeEvent) {\n  return nativeEvent.which === 3 || nativeEvent.button === 2;\n}\n/**\r\n * Checks whether or not a value is a string.\r\n *\r\n * @param value\r\n */\n\nfunction isString(value) {\n  return typeof value === \"string\";\n}\n/**\r\n * Joins strings to format IDs for compound components.\r\n *\r\n * @param args\r\n */\n\nfunction makeId() {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  return args.filter(function (val) {\n    return val != null;\n  }).join(\"--\");\n}\n/**\r\n * No-op function.\r\n */\n\nfunction noop() {}\n/**\r\n * Convert our state strings for HTML data attributes.\r\n * No need for a fancy kebab-caser here, we know what our state strings are!\r\n *\r\n * @param state\r\n */\n\nfunction stateToAttributeString(state) {\n  return String(state).replace(/([\\s_]+)/g, \"-\").toLowerCase();\n}\n/**\r\n * Check if a component is controlled or uncontrolled and return the correct\r\n * state value and setter accordingly. If the component state is controlled by\r\n * the app, the setter is a noop.\r\n *\r\n * @param controlledValue\r\n * @param defaultValue\r\n */\n\nfunction useControlledState(controlledValue, defaultValue) {\n  var controlledRef = useRef(controlledValue != null);\n\n  var _useState = useState(defaultValue),\n      valueState = _useState[0],\n      setValue = _useState[1];\n\n  var set = useCallback(function (n) {\n    if (!controlledRef.current) {\n      setValue(n);\n    }\n  }, []);\n  return [controlledRef.current ? controlledValue : valueState, set];\n}\n/**\r\n * Logs a warning in dev mode when a component switches from controlled to\r\n * uncontrolled, or vice versa\r\n *\r\n * A single prop should typically be used to determine whether or not a\r\n * component is controlled or not.\r\n *\r\n * @param controlledValue\r\n * @param controlledPropName\r\n * @param componentName\r\n */\n\nvar useControlledSwitchWarning = noop;\n\nif (process.env.NODE_ENV !== \"production\") {\n  useControlledSwitchWarning = function useControlledSwitchWarning(controlledValue, controlledPropName, componentName) {\n    var controlledRef = useRef(controlledValue != null);\n    var nameCache = useRef({\n      componentName: componentName,\n      controlledPropName: controlledPropName\n    });\n    useEffect(function () {\n      nameCache.current = {\n        componentName: componentName,\n        controlledPropName: controlledPropName\n      };\n    }, [componentName, controlledPropName]);\n    useEffect(function () {\n      var wasControlled = controlledRef.current;\n      var _nameCache$current = nameCache.current,\n          componentName = _nameCache$current.componentName,\n          controlledPropName = _nameCache$current.controlledPropName;\n      var isControlled = controlledValue != null;\n\n      if (wasControlled !== isControlled) {\n        console.error(\"A component is changing an \" + (wasControlled ? \"\" : \"un\") + \"controlled `\" + controlledPropName + \"` state of \" + componentName + \" to be \" + (wasControlled ? \"un\" : \"\") + \"controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled \" + componentName + \" element for the lifetime of the component.\\nMore info: https://fb.me/react-controlled-components\");\n      }\n    }, [controlledValue]);\n  };\n}\nvar useCheckStyles = noop;\n\nif (process.env.NODE_ENV !== \"production\") {\n  useCheckStyles = function useCheckStyles(pkg) {\n    var name = useRef(pkg);\n    useEffect(function () {\n      return void (name.current = pkg);\n    }, [pkg]);\n    useEffect(function () {\n      return checkStyles(name.current);\n    }, []);\n  };\n}\n/**\r\n * React hook for creating a value exactly once.\r\n * @see https://github.com/Andarist/use-constant\r\n */\n\nfunction useConstant(fn) {\n  var ref = React.useRef();\n\n  if (!ref.current) {\n    ref.current = {\n      v: fn()\n    };\n  }\n\n  return ref.current.v;\n}\n/**\r\n * @param callback\r\n */\n\nfunction useEventCallback(callback) {\n  var ref = useRef(callback);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = callback;\n  });\n  return useCallback(function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return ref.current.apply(ref, [event].concat(args));\n  }, []);\n}\n/**\r\n * @param callback\r\n */\n\nfunction useCallbackProp(callback) {\n  var ref = useRef(callback);\n  useEffect(function () {\n    ref.current = callback;\n  });\n  return useCallback(function () {\n    return ref.current && ref.current.apply(ref, arguments);\n  }, []);\n}\n/**\r\n * Adds a DOM event listener\r\n *\r\n * @param eventName\r\n * @param listener\r\n * @param element\r\n */\n\nfunction useEventListener(eventName, listener, element) {\n  if (element === void 0) {\n    element = window;\n  }\n\n  var savedHandler = useRef(listener);\n  useEffect(function () {\n    savedHandler.current = listener;\n  }, [listener]);\n  useEffect(function () {\n    var isSupported = element && element.addEventListener;\n\n    if (!isSupported) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.warn(\"Event listener not supported on the element provided\");\n      }\n\n      return;\n    }\n\n    function eventListener(event) {\n      savedHandler.current(event);\n    }\n\n    element.addEventListener(eventName, eventListener);\n    return function () {\n      element.removeEventListener(eventName, eventListener);\n    };\n  }, [eventName, element]);\n}\n/**\r\n * Detect when focus changes in our document.\r\n *\r\n * @param handleChange\r\n * @param when\r\n * @param ownerDocument\r\n */\n\nfunction useFocusChange(handleChange, when, ownerDocument) {\n  if (handleChange === void 0) {\n    handleChange = console.log;\n  }\n\n  if (when === void 0) {\n    when = \"focus\";\n  }\n\n  if (ownerDocument === void 0) {\n    ownerDocument = document;\n  }\n\n  var lastActiveElement = useRef(ownerDocument.activeElement);\n  useEffect(function () {\n    lastActiveElement.current = ownerDocument.activeElement;\n\n    function onChange(event) {\n      if (lastActiveElement.current !== ownerDocument.activeElement) {\n        handleChange(ownerDocument.activeElement, lastActiveElement.current, event);\n        lastActiveElement.current = ownerDocument.activeElement;\n      }\n    }\n\n    ownerDocument.addEventListener(when, onChange, true);\n    return function () {\n      ownerDocument.removeEventListener(when, onChange);\n    };\n  }, [when, handleChange, ownerDocument]);\n}\n/**\r\n * Passes or assigns a value to multiple refs (typically a DOM node). Useful for\r\n * dealing with components that need an explicit ref for DOM calculations but\r\n * also forwards refs assigned by an app.\r\n *\r\n * @param refs Refs to fork\r\n */\n\nfunction useForkedRef() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return useMemo(function () {\n    if (refs.every(function (ref) {\n      return ref == null;\n    })) {\n      return null;\n    }\n\n    return function (node) {\n      refs.forEach(function (ref) {\n        assignRef(ref, node);\n      });\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [].concat(refs));\n}\n/**\r\n * Returns the previous value of a reference after a component update.\r\n *\r\n * @param value\r\n */\n\nfunction usePrevious(value) {\n  var ref = useRef(null);\n  useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n/**\r\n * Call an effect after a component update, skipping the initial mount.\r\n *\r\n * @param effect Effect to call\r\n * @param deps Effect dependency list\r\n */\n\nfunction useUpdateEffect(effect, deps) {\n  var mounted = useRef(false);\n  useEffect(function () {\n    if (mounted.current) {\n      effect();\n    } else {\n      mounted.current = true;\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, deps);\n}\n/**\r\n * Just a lil state logger\r\n *\r\n * @param state\r\n * @param DEBUG\r\n */\n\nvar useStateLogger = noop;\n\nif (process.env.NODE_ENV !== \"production\") {\n  useStateLogger = function useStateLogger(state, DEBUG) {\n    if (DEBUG === void 0) {\n      DEBUG = false;\n    }\n\n    var debugRef = useRef(DEBUG);\n    useEffect(function () {\n      debugRef.current = DEBUG;\n    }, [DEBUG]);\n    useEffect(function () {\n      if (debugRef.current) {\n        console.group(\"State Updated\");\n        console.log(\"%c\" + state, \"font-weight: normal; font-size: 120%; font-style: italic;\");\n        console.groupEnd();\n      }\n    }, [state]);\n  };\n}\n/**\r\n * Wraps a lib-defined event handler and a user-defined event handler, returning\r\n * a single handler that allows a user to prevent lib-defined handlers from\r\n * firing.\r\n *\r\n * @param theirHandler User-supplied event handler\r\n * @param ourHandler Library-supplied event handler\r\n */\n\nfunction wrapEvent(theirHandler, ourHandler) {\n  return function (event) {\n    theirHandler && theirHandler(event);\n\n    if (!event.defaultPrevented) {\n      return ourHandler(event);\n    }\n  };\n}\n\nexport { assignRef, boolOrBoolString, canUseDOM, checkStyles, cloneValidElement, createNamedContext, forwardRefWithAs, getDocumentDimensions, getElementComputedStyle, getOwnerDocument, getOwnerWindow, getScrollPosition, getScrollbarOffset, isBoolean, isFunction, isNumber, isRightClick, isString, makeId, memoWithAs, noop, ponyfillGlobal, stateToAttributeString, useCallbackProp, useCheckStyles, useConstant, useControlledState, useControlledSwitchWarning, useEventCallback, useEventListener, useFocusChange, useForkedRef, useIsomorphicLayoutEffect, usePrevious, useStateLogger, useUpdateEffect, wrapEvent };\n//# sourceMappingURL=utils.esm.js.map\n","import { useState, useEffect } from 'react';\nimport { useIsomorphicLayoutEffect } from '@reach/utils';\n\n/*\r\n * Welcome to @reach/auto-id!\r\n\n * Let's see if we can make sense of why this hook exists and its\r\n * implementation.\r\n *\r\n * Some background:\r\n *   1. Accessibiliy APIs rely heavily on element IDs\r\n *   2. Requiring developers to put IDs on every element in Reach UI is both\r\n *      cumbersome and error-prone\r\n *   3. With a component model, we can generate IDs for them!\r\n *\r\n * Solution 1: Generate random IDs.\r\n *\r\n * This works great as long as you don't server render your app. When React (in\r\n * the client) tries to reuse the markup from the server, the IDs won't match\r\n * and React will then recreate the entire DOM tree.\r\n *\r\n * Solution 2: Increment an integer\r\n *\r\n * This sounds great. Since we're rendering the exact same tree on the server\r\n * and client, we can increment a counter and get a deterministic result between\r\n * client and server. Also, JS integers can go up to nine-quadrillion. I'm\r\n * pretty sure the tab will be closed before an app never needs\r\n * 10 quadrillion IDs!\r\n *\r\n * Problem solved, right?\r\n *\r\n * Ah, but there's a catch! React's concurrent rendering makes this approach\r\n * non-deterministic. While the client and server will end up with the same\r\n * elements in the end, depending on suspense boundaries (and possibly some user\r\n * input during the initial render) the incrementing integers won't always match\r\n * up.\r\n *\r\n * Solution 3: Don't use IDs at all on the server; patch after first render.\r\n *\r\n * What we've done here is solution 2 with some tricks. With this approach, the\r\n * ID returned is an empty string on the first render. This way the server and\r\n * client have the same markup no matter how wild the concurrent rendering may\r\n * have gotten.\r\n *\r\n * After the render, we patch up the components with an incremented ID. This\r\n * causes a double render on any components with `useId`. Shouldn't be a problem\r\n * since the components using this hook should be small, and we're only updating\r\n * the ID attribute on the DOM, nothing big is happening.\r\n *\r\n * It doesn't have to be an incremented number, though--we could do generate\r\n * random strings instead, but incrementing a number is probably the cheapest\r\n * thing we can do.\r\n *\r\n * Additionally, we only do this patchup on the very first client render ever.\r\n * Any calls to `useId` that happen dynamically in the client will be\r\n * populated immediately with a value. So, we only get the double render after\r\n * server hydration and never again, SO BACK OFF ALRIGHT?\r\n */\nvar serverHandoffComplete = false;\nvar id = 0;\n\nvar genId = function genId() {\n  return ++id;\n};\n/**\r\n * useId\r\n *\r\n * Autogenerate IDs to facilitate WAI-ARIA and server rendering.\r\n *\r\n * Note: The returned ID will initially be `null` and will update after a\r\n * component mounts. Users may need to supply their own ID if they need\r\n * consistent values for SSR.\r\n *\r\n * @see Docs https://reacttraining.com/reach-ui/auto-id\r\n */\n\n\nvar useId = function useId(idFromProps) {\n  /*\r\n   * If this instance isn't part of the initial render, we don't have to do the\r\n   * double render/patch-up dance. We can just generate the ID and return it.\r\n   */\n  var initialId = idFromProps || (serverHandoffComplete ? genId() : null);\n\n  var _useState = useState(initialId),\n      id = _useState[0],\n      setId = _useState[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (id === null) {\n      /*\r\n       * Patch the ID after render. We do this in `useLayoutEffect` to avoid any\r\n       * rendering flicker, though it'll make the first render slower (unlikely\r\n       * to matter, but you're welcome to measure your app and let us know if\r\n       * it's a problem).\r\n       */\n      setId(genId());\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  useEffect(function () {\n    if (serverHandoffComplete === false) {\n      /*\r\n       * Flag all future uses of `useId` to skip the update dance. This is in\r\n       * `useEffect` because it goes after `useLayoutEffect`, ensuring we don't\r\n       * accidentally bail out of the patch-up dance prematurely.\r\n       */\n      serverHandoffComplete = true;\n    }\n  }, []);\n  return id != null ? String(id) : undefined;\n};\n\nexport { useId };\n//# sourceMappingURL=auto-id.esm.js.map\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export var canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport { canUseDOM } from './utils';\n\nvar Portal = function (_React$Component) {\n  _inherits(Portal, _React$Component);\n\n  function Portal() {\n    _classCallCheck(this, Portal);\n\n    return _possibleConstructorReturn(this, (Portal.__proto__ || Object.getPrototypeOf(Portal)).apply(this, arguments));\n  }\n\n  _createClass(Portal, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.defaultNode) {\n        document.body.removeChild(this.defaultNode);\n      }\n      this.defaultNode = null;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!canUseDOM) {\n        return null;\n      }\n      if (!this.props.node && !this.defaultNode) {\n        this.defaultNode = document.createElement('div');\n        document.body.appendChild(this.defaultNode);\n      }\n      return ReactDOM.createPortal(this.props.children, this.props.node || this.defaultNode);\n    }\n  }]);\n\n  return Portal;\n}(React.Component);\n\nPortal.propTypes = {\n  children: PropTypes.node.isRequired,\n  node: PropTypes.any\n};\n\nexport default Portal;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// This file is a fallback for a consumer who is not yet on React 16\n// as createPortal was introduced in React 16\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nvar Portal = function (_React$Component) {\n  _inherits(Portal, _React$Component);\n\n  function Portal() {\n    _classCallCheck(this, Portal);\n\n    return _possibleConstructorReturn(this, (Portal.__proto__ || Object.getPrototypeOf(Portal)).apply(this, arguments));\n  }\n\n  _createClass(Portal, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.renderPortal();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(props) {\n      this.renderPortal();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      ReactDOM.unmountComponentAtNode(this.defaultNode || this.props.node);\n      if (this.defaultNode) {\n        document.body.removeChild(this.defaultNode);\n      }\n      this.defaultNode = null;\n      this.portal = null;\n    }\n  }, {\n    key: 'renderPortal',\n    value: function renderPortal(props) {\n      if (!this.props.node && !this.defaultNode) {\n        this.defaultNode = document.createElement('div');\n        document.body.appendChild(this.defaultNode);\n      }\n\n      var children = this.props.children;\n      // https://gist.github.com/jimfb/d99e0678e9da715ccf6454961ef04d1b\n      if (typeof this.props.children.type === 'function') {\n        children = React.cloneElement(this.props.children);\n      }\n\n      this.portal = ReactDOM.unstable_renderSubtreeIntoContainer(this, children, this.props.node || this.defaultNode);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Portal;\n}(React.Component);\n\nexport default Portal;\n\n\nPortal.propTypes = {\n  children: PropTypes.node.isRequired,\n  node: PropTypes.any\n};","import ReactDOM from 'react-dom';\n\nimport Portalv4 from './Portal';\nimport LegacyPortal from './LegacyPortal';\n\nvar Portal = void 0;\n\nif (ReactDOM.createPortal) {\n  Portal = Portalv4;\n} else {\n  Portal = LegacyPortal;\n}\n\nexport default Portal;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Portal from './PortalCompat';\n\nvar KEYCODES = {\n  ESCAPE: 27\n};\n\nvar PortalWithState = function (_React$Component) {\n  _inherits(PortalWithState, _React$Component);\n\n  function PortalWithState(props) {\n    _classCallCheck(this, PortalWithState);\n\n    var _this = _possibleConstructorReturn(this, (PortalWithState.__proto__ || Object.getPrototypeOf(PortalWithState)).call(this, props));\n\n    _this.portalNode = null;\n    _this.state = { active: !!props.defaultOpen };\n    _this.openPortal = _this.openPortal.bind(_this);\n    _this.closePortal = _this.closePortal.bind(_this);\n    _this.wrapWithPortal = _this.wrapWithPortal.bind(_this);\n    _this.handleOutsideMouseClick = _this.handleOutsideMouseClick.bind(_this);\n    _this.handleKeydown = _this.handleKeydown.bind(_this);\n    return _this;\n  }\n\n  _createClass(PortalWithState, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.closeOnEsc) {\n        document.addEventListener('keydown', this.handleKeydown);\n      }\n      if (this.props.closeOnOutsideClick) {\n        document.addEventListener('click', this.handleOutsideMouseClick);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.props.closeOnEsc) {\n        document.removeEventListener('keydown', this.handleKeydown);\n      }\n      if (this.props.closeOnOutsideClick) {\n        document.removeEventListener('click', this.handleOutsideMouseClick);\n      }\n    }\n  }, {\n    key: 'openPortal',\n    value: function openPortal(e) {\n      if (this.state.active) {\n        return;\n      }\n      if (e && e.nativeEvent) {\n        e.nativeEvent.stopImmediatePropagation();\n      }\n      this.setState({ active: true }, this.props.onOpen);\n    }\n  }, {\n    key: 'closePortal',\n    value: function closePortal() {\n      if (!this.state.active) {\n        return;\n      }\n      this.setState({ active: false }, this.props.onClose);\n    }\n  }, {\n    key: 'wrapWithPortal',\n    value: function wrapWithPortal(children) {\n      var _this2 = this;\n\n      if (!this.state.active) {\n        return null;\n      }\n      return React.createElement(\n        Portal,\n        {\n          node: this.props.node,\n          key: 'react-portal',\n          ref: function ref(portalNode) {\n            return _this2.portalNode = portalNode;\n          }\n        },\n        children\n      );\n    }\n  }, {\n    key: 'handleOutsideMouseClick',\n    value: function handleOutsideMouseClick(e) {\n      if (!this.state.active) {\n        return;\n      }\n      var root = this.portalNode && (this.portalNode.props.node || this.portalNode.defaultNode);\n      if (!root || root.contains(e.target) || e.button && e.button !== 0) {\n        return;\n      }\n      this.closePortal();\n    }\n  }, {\n    key: 'handleKeydown',\n    value: function handleKeydown(e) {\n      if (e.keyCode === KEYCODES.ESCAPE && this.state.active) {\n        this.closePortal();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return this.props.children({\n        openPortal: this.openPortal,\n        closePortal: this.closePortal,\n        portal: this.wrapWithPortal,\n        isOpen: this.state.active\n      });\n    }\n  }]);\n\n  return PortalWithState;\n}(React.Component);\n\nPortalWithState.propTypes = {\n  children: PropTypes.func.isRequired,\n  defaultOpen: PropTypes.bool,\n  node: PropTypes.any,\n  closeOnEsc: PropTypes.bool,\n  closeOnOutsideClick: PropTypes.bool,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func\n};\n\nPortalWithState.defaultProps = {\n  onOpen: function onOpen() {},\n  onClose: function onClose() {}\n};\n\nexport default PortalWithState;","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nmodule.exports = baseClamp;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var baseClamp = require('./_baseClamp'),\n    toNumber = require('./toNumber');\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nmodule.exports = clamp;\n","let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nlet customAlphabet = (alphabet, size) => {\n  return () => {\n    let id = ''\n    let i = size\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nlet nanoid = (size = 21) => {\n  let id = ''\n  let i = size\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\nexport { nanoid, customAlphabet }\n","import React from \"react\";\r\nimport styles from \"./ContextMenu.css\";\r\nimport clamp from \"lodash/clamp\";\r\nimport { nanoid }from \"nanoid/non-secure/index\";\r\n\r\nconst ContextMenu = ({\r\n  x,\r\n  y,\r\n  options = [],\r\n  onRequestClose,\r\n  onOptionSelected,\r\n  label,\r\n  hideHeader,\r\n  hideFilter,\r\n  emptyText\r\n}) => {\r\n  const menuWrapper = React.useRef();\r\n  const menuOptionsWrapper = React.useRef();\r\n  const filterInput = React.useRef();\r\n  const [filter, setFilter] = React.useState(\"\");\r\n  const [menuWidth, setMenuWidth] = React.useState(0);\r\n  const [selectedIndex, setSelectedIndex] = React.useState(0);\r\n  const menuId = React.useRef(nanoid(10));\r\n\r\n  const handleOptionSelected = option => {\r\n    onOptionSelected(option);\r\n    onRequestClose();\r\n  };\r\n\r\n  const testClickOutside = React.useCallback(\r\n    e => {\r\n      if (menuWrapper.current && !menuWrapper.current.contains(e.target)) {\r\n        onRequestClose();\r\n        document.removeEventListener(\"click\", testClickOutside, { capture: true });\r\n        document.removeEventListener(\"contextmenu\", testClickOutside, { capture: true });\r\n      }\r\n    },\r\n    [menuWrapper, onRequestClose]\r\n  );\r\n\r\n  const testEscape = React.useCallback(\r\n    e => {\r\n      if (e.keyCode === 27) {\r\n        onRequestClose();\r\n        document.removeEventListener(\"keydown\", testEscape, { capture: true });\r\n      }\r\n    },\r\n    [onRequestClose]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (filterInput.current) {\r\n      filterInput.current.focus();\r\n    }\r\n    setMenuWidth(menuWrapper.current.getBoundingClientRect().width);\r\n    document.addEventListener(\"keydown\", testEscape, { capture: true });\r\n    document.addEventListener(\"click\", testClickOutside, { capture: true });\r\n    document.addEventListener(\"contextmenu\", testClickOutside, { capture: true });\r\n    return () => {\r\n      document.removeEventListener(\"click\", testClickOutside, { capture: true });\r\n      document.removeEventListener(\"contextmenu\", testClickOutside, { capture: true });\r\n      document.removeEventListener(\"keydown\", testEscape, { capture: true });\r\n    };\r\n  }, [testClickOutside, testEscape]);\r\n\r\n  const filteredOptions = React.useMemo(() => {\r\n    if (!filter) return options;\r\n    const lowerFilter = filter.toLowerCase();\r\n    return options.filter(opt => opt.label.toLowerCase().includes(lowerFilter));\r\n  }, [filter, options]);\r\n\r\n  const handleFilterChange = e => {\r\n    const value = e.target.value;\r\n    setFilter(value);\r\n    setSelectedIndex(0);\r\n  };\r\n\r\n  const handleKeyDown = e => {\r\n    // Up pressed\r\n    if (e.which === 38) {\r\n      e.preventDefault();\r\n      if (selectedIndex === null) {\r\n        setSelectedIndex(0);\r\n      } else if (selectedIndex > 0) {\r\n        setSelectedIndex(i => i - 1);\r\n      }\r\n    }\r\n    // Down pressed\r\n    if (e.which === 40) {\r\n      e.preventDefault();\r\n      if (selectedIndex === null) {\r\n        setSelectedIndex(0);\r\n      } else if (selectedIndex < filteredOptions.length - 1) {\r\n        setSelectedIndex(i => i + 1);\r\n      }\r\n    }\r\n    // Enter pressed\r\n    if (e.which === 13 && selectedIndex !== null) {\r\n      const option = filteredOptions[selectedIndex];\r\n      if (option) {\r\n        handleOptionSelected(option);\r\n      }\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (hideFilter || hideHeader) {\r\n      menuWrapper.current.focus();\r\n    }\r\n  }, [hideFilter, hideHeader]);\r\n\r\n  React.useEffect(() => {\r\n    const menuOption = document.getElementById(\r\n      `${menuId.current}-${selectedIndex}`\r\n    );\r\n    if (menuOption) {\r\n      const menuRect = menuOptionsWrapper.current.getBoundingClientRect();\r\n      const optionRect = menuOption.getBoundingClientRect();\r\n      if (\r\n        optionRect.y + optionRect.height > menuRect.y + menuRect.height ||\r\n        optionRect.y < menuRect.y\r\n      ) {\r\n        menuOption.scrollIntoView({ block: \"nearest\" });\r\n      }\r\n    }\r\n  }, [selectedIndex]);\r\n\r\n  return (\r\n    <div\r\n      data-flume-component=\"ctx-menu\"\r\n      className={styles.menuWrapper}\r\n      onMouseDown={e => e.stopPropagation()}\r\n      onKeyDown={handleKeyDown}\r\n      style={{\r\n        left: x,\r\n        top: y,\r\n        width: filter ? menuWidth : \"auto\"\r\n      }}\r\n      ref={menuWrapper}\r\n      tabIndex={0}\r\n      role=\"menu\"\r\n      aria-activedescendant={`${menuId.current}-${selectedIndex}`}\r\n    >\r\n      {!hideHeader && (label ? true : !!options.length) ? (\r\n        <div className={styles.menuHeader} data-flume-component=\"ctx-menu-header\">\r\n          <label className={styles.menuLabel} data-flume-component=\"ctx-menu-title\">{label}</label>\r\n          {!hideFilter && options.length ? (\r\n            <input\r\n              data-flume-component=\"ctx-menu-input\"\r\n              type=\"text\"\r\n              placeholder=\"Filter options\"\r\n              value={filter}\r\n              onChange={handleFilterChange}\r\n              className={styles.menuFilter}\r\n              autoFocus\r\n              ref={filterInput}\r\n            />\r\n          ) : null}\r\n        </div>\r\n      ) : null}\r\n      <div\r\n        data-flume-component=\"ctx-menu-list\"\r\n        className={styles.optionsWrapper}\r\n        role=\"menu\"\r\n        ref={menuOptionsWrapper}\r\n        style={{ maxHeight: clamp(window.innerHeight - y - 70, 10, 300) }}\r\n      >\r\n        {filteredOptions.map((option, i) => (\r\n          <ContextOption\r\n            menuId={menuId.current}\r\n            selected={selectedIndex === i}\r\n            onClick={() => handleOptionSelected(option)}\r\n            onMouseEnter={() => setSelectedIndex(null)}\r\n            index={i}\r\n            key={option.value + i}\r\n          >\r\n            <label>{option.label}</label>\r\n            {option.description ? <p>{option.description}</p> : null}\r\n          </ContextOption>\r\n        ))}\r\n        {!options.length ? (\r\n          <span data-flume-component=\"ctx-menu-empty\" className={styles.emptyText}>{emptyText}</span>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ContextOption = ({\r\n  menuId,\r\n  index,\r\n  children,\r\n  onClick,\r\n  selected,\r\n  onMouseEnter\r\n}) => {\r\n  return (\r\n    <div\r\n      data-flume-component=\"ctx-menu-option\"\r\n      className={styles.option}\r\n      role=\"menuitem\"\r\n      onClick={onClick}\r\n      onMouseEnter={onMouseEnter}\r\n      data-selected={selected}\r\n      id={`${menuId}-${index}`}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContextMenu;\r\n","import React from 'react'\r\n\r\nexport const NodeTypesContext = React.createContext()\r\nexport const PortTypesContext = React.createContext()\r\nexport const NodeDispatchContext = React.createContext()\r\nexport const ConnectionRecalculateContext = React.createContext()\r\nexport const ContextContext = React.createContext()\r\nexport const StageContext = React.createContext()\r\nexport const CacheContext = React.createContext()\r\nexport const RecalculateStageRectContext = React.createContext()\r\nexport const EditorIdContext = React.createContext()\r\n","import React from \"react\";\r\n\r\nexport default ({\r\n  children,\r\n  stageState,\r\n  stageRect,\r\n  onDragDelayStart,\r\n  onDragStart,\r\n  onDrag,\r\n  onDragEnd,\r\n  onMouseDown,\r\n  onTouchStart,\r\n  disabled,\r\n  delay = 6,\r\n  innerRef,\r\n  ...rest\r\n}) => {\r\n  const startCoordinates = React.useRef(null);\r\n  const offset = React.useRef();\r\n  const wrapper = React.useRef();\r\n\r\n  const byScale = value => (1 / stageState.scale) * value;\r\n\r\n  const getScaledCoordinates = e => {\r\n    const x =\r\n      byScale(\r\n        e.clientX -\r\n          (stageRect ? stageRect.current.left : 0) -\r\n          offset.current.x -\r\n          (stageRect ? stageRect.current.width : 0) / 2\r\n      ) + byScale(stageState.translate.x);\r\n    const y =\r\n      byScale(\r\n        e.clientY -\r\n          (stageRect ? stageRect.current.top : 0) -\r\n          offset.current.y -\r\n          (stageRect ? stageRect.current.height : 0) / 2\r\n      ) + byScale(stageState.translate.y);\r\n    return { x, y };\r\n  };\r\n\r\n  const updateCoordinates = e => {\r\n    const coordinates = getScaledCoordinates(e);\r\n    if (onDrag) {\r\n      onDrag(coordinates, e);\r\n    }\r\n  };\r\n\r\n  const stopDrag = e => {\r\n    const coordinates = getScaledCoordinates(e);\r\n    if (onDragEnd) {\r\n      onDragEnd(e, coordinates);\r\n    }\r\n    window.removeEventListener(\"mouseup\", stopDrag);\r\n    window.removeEventListener(\"mousemove\", updateCoordinates);\r\n  };\r\n\r\n  const startDrag = e => {\r\n    if (onDragStart) {\r\n      onDragStart(e);\r\n    }\r\n    const nodeRect = wrapper.current.getBoundingClientRect();\r\n    offset.current = {\r\n      x: startCoordinates.current.x - nodeRect.left,\r\n      y: startCoordinates.current.y - nodeRect.top\r\n    };\r\n    window.addEventListener(\"mouseup\", stopDrag);\r\n    window.addEventListener(\"mousemove\", updateCoordinates);\r\n  };\r\n\r\n  const checkDragDelay = e => {\r\n    let x;\r\n    let y;\r\n    if (\"ontouchstart\" in window && e.touches) {\r\n      x = e.touches[0].clientX;\r\n      y = e.touches[0].clientY;\r\n    } else {\r\n      e.preventDefault();\r\n      x = e.clientX;\r\n      y = e.clientY;\r\n    }\r\n    let a = Math.abs(startCoordinates.current.x - x);\r\n    let b = Math.abs(startCoordinates.current.y - y);\r\n    let distance = Math.round(Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2)));\r\n    let dragDistance = delay;\r\n    if (distance >= dragDistance) {\r\n      startDrag(e);\r\n      endDragDelay();\r\n    }\r\n  };\r\n\r\n  const endDragDelay = () => {\r\n    document.removeEventListener(\"mouseup\", endDragDelay);\r\n    document.removeEventListener(\"mousemove\", checkDragDelay);\r\n    startCoordinates.current = null;\r\n  };\r\n\r\n  const startDragDelay = e => {\r\n    if (onDragDelayStart) {\r\n      onDragDelayStart(e);\r\n    }\r\n    e.stopPropagation();\r\n    let x;\r\n    let y;\r\n    if (\"ontouchstart\" in window && e.touches) {\r\n      x = e.touches[0].clientX;\r\n      y = e.touches[0].clientY;\r\n    } else {\r\n      e.preventDefault();\r\n      x = e.clientX;\r\n      y = e.clientY;\r\n    }\r\n    startCoordinates.current = { x, y };\r\n    document.addEventListener(\"mouseup\", endDragDelay);\r\n    document.addEventListener(\"mousemove\", checkDragDelay);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      onMouseDown={e => {\r\n        if (!disabled) {\r\n          startDragDelay(e);\r\n        }\r\n        if (onMouseDown) {\r\n          onMouseDown(e);\r\n        }\r\n      }}\r\n      onTouchStart={e => {\r\n        if (!disabled) {\r\n          startDragDelay(e);\r\n        }\r\n        if (onTouchStart) {\r\n          onTouchStart(e);\r\n        }\r\n      }}\r\n      onDragStart={e => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }}\r\n      ref={ref => {\r\n        wrapper.current = ref;\r\n        if (innerRef) {\r\n          innerRef.current = ref;\r\n        }\r\n      }}\r\n      {...rest}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","var baseOrderBy = require('./_baseOrderBy'),\n    isArray = require('./isArray');\n\n/**\n * This method is like `_.sortBy` except that it allows specifying the sort\n * orders of the iteratees to sort by. If `orders` is unspecified, all values\n * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n * descending or \"asc\" for ascending sort order of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @param {string[]} [orders] The sort orders of `iteratees`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 34 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 36 }\n * ];\n *\n * // Sort by `user` in ascending order and by `age` in descending order.\n * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n */\nfunction orderBy(collection, iteratees, orders, guard) {\n  if (collection == null) {\n    return [];\n  }\n  if (!isArray(iteratees)) {\n    iteratees = iteratees == null ? [] : [iteratees];\n  }\n  orders = guard ? undefined : orders;\n  if (!isArray(orders)) {\n    orders = orders == null ? [] : [orders];\n  }\n  return baseOrderBy(collection, iteratees, orders);\n}\n\nmodule.exports = orderBy;\n","export const STAGE_ID = '__node_editor_stage__'\r\nexport const DRAG_CONNECTION_ID = '__node_editor_drag_connection__'\r\nexport const CONNECTIONS_ID = '__node_editor_connections__'\r\n","import React from \"react\";\r\nimport styles from \"./Stage.css\";\r\nimport { Portal } from \"react-portal\";\r\nimport ContextMenu from \"../ContextMenu/ContextMenu\";\r\nimport { NodeTypesContext, NodeDispatchContext } from \"../../context\";\r\nimport Draggable from \"../Draggable/Draggable\";\r\nimport orderBy from \"lodash/orderBy\";\r\nimport clamp from \"lodash/clamp\";\r\nimport { STAGE_ID } from '../../constants'\r\n\r\nconst Stage = ({\r\n  scale,\r\n  translate,\r\n  editorId,\r\n  dispatchStageState,\r\n  children,\r\n  outerStageChildren,\r\n  numNodes,\r\n  stageRef,\r\n  spaceToPan,\r\n  dispatchComments,\r\n  disableComments,\r\n  disablePan,\r\n  disableZoom\r\n}) => {\r\n  const nodeTypes = React.useContext(NodeTypesContext);\r\n  const dispatchNodes = React.useContext(NodeDispatchContext);\r\n  const wrapper = React.useRef();\r\n  const translateWrapper = React.useRef();\r\n  const [menuOpen, setMenuOpen] = React.useState(false);\r\n  const [menuCoordinates, setMenuCoordinates] = React.useState({ x: 0, y: 0 });\r\n  const dragData = React.useRef({ x: 0, y: 0 });\r\n  const [spaceIsPressed, setSpaceIsPressed] = React.useState(false);\r\n\r\n  const setStageRect = React.useCallback(() => {\r\n    stageRef.current = wrapper.current.getBoundingClientRect();\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    stageRef.current = wrapper.current.getBoundingClientRect();\r\n    window.addEventListener(\"resize\", setStageRect);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", setStageRect);\r\n    };\r\n  }, [stageRef, setStageRect]);\r\n\r\n  const handleWheel = React.useCallback(\r\n    e => {\r\n      if (e.target.nodeName === \"TEXTAREA\" || e.target.dataset.comment) {\r\n        if (e.target.clientHeight < e.target.scrollHeight) return;\r\n      }\r\n      e.preventDefault();\r\n      if (numNodes === 0) return;\r\n      dispatchStageState(({ scale: currentScale, translate: currentTranslate }) => {\r\n        const delta = e.deltaY;\r\n        const newScale = clamp(currentScale - clamp(delta, -10, 10) * 0.005, 0.1, 7);\r\n\r\n        const byOldScale = (no) => no * (1 / currentScale);\r\n        const byNewScale = (no) => no * (1 / newScale);\r\n\r\n        const wrapperRect = wrapper.current.getBoundingClientRect();\r\n\r\n        const xOld = byOldScale(e.clientX - wrapperRect.x - wrapperRect.width / 2 + currentTranslate.x);\r\n        const yOld = byOldScale(e.clientY - wrapperRect.y - wrapperRect.height / 2 + currentTranslate.y);\r\n\r\n        const xNew = byNewScale(e.clientX - wrapperRect.x - wrapperRect.width / 2 + currentTranslate.x);\r\n        const yNew = byNewScale(e.clientY - wrapperRect.y - wrapperRect.height / 2 + currentTranslate.y);\r\n\r\n        const xDistance = xOld - xNew;\r\n        const yDistance = yOld - yNew;\r\n\r\n\r\n        return {\r\n          type: \"SET_TRANSLATE_SCALE\",\r\n          scale: newScale,\r\n          translate: {\r\n            x: currentTranslate.x + xDistance * newScale,\r\n            y: currentTranslate.y + yDistance * newScale\r\n          }\r\n        }\r\n      });\r\n\r\n    },\r\n    [dispatchStageState, numNodes]\r\n  );\r\n\r\n  const handleDragDelayStart = e => {\r\n    wrapper.current.focus();\r\n  };\r\n\r\n  const handleDragStart = e => {\r\n    e.preventDefault();\r\n    dragData.current = {\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    };\r\n  };\r\n\r\n  const handleMouseDrag = (coords, e) => {\r\n    const xDistance = dragData.current.x - e.clientX;\r\n    const yDistance = dragData.current.y - e.clientY;\r\n    const xDelta = translate.x + xDistance;\r\n    const yDelta = translate.y + yDistance;\r\n    wrapper.current.style.backgroundPosition = `${-xDelta}px ${-yDelta}px`;\r\n    translateWrapper.current.style.transform = `translate(${-(\r\n      translate.x + xDistance\r\n    )}px, ${-(translate.y + yDistance)}px)`;\r\n  };\r\n\r\n  const handleDragEnd = e => {\r\n    const xDistance = dragData.current.x - e.clientX;\r\n    const yDistance = dragData.current.y - e.clientY;\r\n    dragData.current.x = e.clientX;\r\n    dragData.current.y = e.clientY;\r\n    dispatchStageState(({ translate: tran }) => ({\r\n      type: \"SET_TRANSLATE\",\r\n      translate: {\r\n        x: tran.x + xDistance,\r\n        y: tran.y + yDistance\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleContextMenu = e => {\r\n    e.preventDefault();\r\n    setMenuCoordinates({ x: e.clientX, y: e.clientY });\r\n    setMenuOpen(true);\r\n    return false;\r\n  };\r\n\r\n  const closeContextMenu = () => {\r\n    setMenuOpen(false);\r\n  };\r\n\r\n  const byScale = value => (1 / scale) * value;\r\n\r\n  const addNode = ({ node, internalType }) => {\r\n    const wrapperRect = wrapper.current.getBoundingClientRect();\r\n    const x =\r\n      byScale(menuCoordinates.x - wrapperRect.x - wrapperRect.width / 2) +\r\n      byScale(translate.x);\r\n    const y =\r\n      byScale(menuCoordinates.y - wrapperRect.y - wrapperRect.height / 2) +\r\n      byScale(translate.y);\r\n    if (internalType === \"comment\") {\r\n      dispatchComments({\r\n        type: \"ADD_COMMENT\",\r\n        x,\r\n        y\r\n      });\r\n    } else {\r\n      dispatchNodes({\r\n        type: \"ADD_NODE\",\r\n        x,\r\n        y,\r\n        nodeType: node.type\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDocumentKeyUp = e => {\r\n    if (e.which === 32) {\r\n      setSpaceIsPressed(false);\r\n      document.removeEventListener(\"keyup\", handleDocumentKeyUp);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = e => {\r\n    if (e.which === 32 && document.activeElement === wrapper.current) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      setSpaceIsPressed(true);\r\n      document.addEventListener(\"keyup\", handleDocumentKeyUp);\r\n    }\r\n  };\r\n\r\n  const handleMouseEnter = () => {\r\n    if (!wrapper.current.contains(document.activeElement)) {\r\n      wrapper.current.focus();\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!disableZoom) {\r\n      let stageWrapper = wrapper.current;\r\n      stageWrapper.addEventListener(\"wheel\", handleWheel);\r\n      return () => {\r\n        stageWrapper.removeEventListener(\"wheel\", handleWheel);\r\n      };\r\n    }\r\n  }, [handleWheel, disableZoom]);\r\n\r\n  const menuOptions = React.useMemo(\r\n    () => {\r\n      const options = orderBy(\r\n        Object.values(nodeTypes)\r\n          .filter(node => node.addable !== false)\r\n          .map(node => ({\r\n            value: node.type,\r\n            label: node.label,\r\n            description: node.description,\r\n            sortIndex: node.sortIndex,\r\n            node\r\n          })),\r\n        [\"sortIndex\", \"label\"]\r\n      )\r\n      if (!disableComments) {\r\n        options.push({ value: \"comment\", label: \"Comment\", description: \"A comment for documenting nodes\", internalType: \"comment\" })\r\n      }\r\n      return options\r\n    },\r\n    [nodeTypes, disableComments]\r\n  );\r\n\r\n  return (\r\n    <Draggable\r\n      data-flume-component=\"stage\"\r\n      id={`${STAGE_ID}${editorId}`}\r\n      className={styles.wrapper}\r\n      innerRef={wrapper}\r\n      onContextMenu={handleContextMenu}\r\n      onMouseEnter={handleMouseEnter}\r\n      onDragDelayStart={handleDragDelayStart}\r\n      onDragStart={handleDragStart}\r\n      onDrag={handleMouseDrag}\r\n      onDragEnd={handleDragEnd}\r\n      onKeyDown={handleKeyDown}\r\n      tabIndex={-1}\r\n      stageState={{ scale, translate }}\r\n      style={{ cursor: spaceIsPressed && spaceToPan ? \"grab\" : \"\" }}\r\n      disabled={disablePan || (spaceToPan && !spaceIsPressed)}\r\n      data-flume-stage={true}\r\n    >\r\n      {menuOpen ? (\r\n        <Portal>\r\n          <ContextMenu\r\n            x={menuCoordinates.x}\r\n            y={menuCoordinates.y}\r\n            options={menuOptions}\r\n            onRequestClose={closeContextMenu}\r\n            onOptionSelected={addNode}\r\n            label=\"Add Node\"\r\n          />\r\n        </Portal>\r\n      ) : null}\r\n      <div\r\n        ref={translateWrapper}\r\n        className={styles.transformWrapper}\r\n        style={{ transform: `translate(${-translate.x}px, ${-translate.y}px)` }}\r\n      >\r\n        <div\r\n          className={styles.scaleWrapper}\r\n          style={{ transform: `scale(${scale})` }}\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n      {outerStageChildren}\r\n    </Draggable>\r\n  );\r\n};\r\nexport default Stage;\r\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","import styles from \"./components/Connection/Connection.css\";\r\nimport { CONNECTIONS_ID } from './constants'\r\nimport { line, curveBasis } from 'd3-shape'\r\n\r\nconst getPort = (nodeId, portName, transputType = \"input\") => document\r\n  .querySelector(\r\n    `[data-node-id=\"${nodeId}\"] [data-port-name=\"${portName}\"][data-port-transput-type=\"${transputType}\"]`\r\n  )\r\n\r\nexport const getPortRect = (nodeId, portName, transputType = \"input\", cache) => {\r\n  if(cache){\r\n    const portCacheName = nodeId + portName + transputType;\r\n    const cachedPort = cache.current.ports[portCacheName];\r\n    if(cachedPort){\r\n      return cachedPort.getBoundingClientRect();\r\n    }else{\r\n      const port = getPort(nodeId, portName, transputType)\r\n      cache.current.ports[portCacheName] = port;\r\n      return port && port.getBoundingClientRect();\r\n    }\r\n  }else{\r\n    const port = getPort(nodeId, portName, transputType);\r\n    return port && port.getBoundingClientRect();\r\n  }\r\n}\r\n\r\nexport const getPortRectsByNodes = (nodes, forEachConnection) =>\r\n  Object.values(nodes).reduce((obj, node) => {\r\n    if (node.connections && node.connections.inputs) {\r\n      Object.entries(node.connections.inputs).forEach(\r\n        ([inputName, outputs]) => {\r\n          outputs.forEach(output => {\r\n            const toRect = getPortRect(node.id, inputName);\r\n            const fromRect = getPortRect(\r\n              output.nodeId,\r\n              output.portName,\r\n              \"output\"\r\n            );\r\n            if (forEachConnection) {\r\n              forEachConnection({\r\n                to: toRect,\r\n                from: fromRect,\r\n                name: output.nodeId + output.portName + node.id + inputName\r\n              });\r\n            }\r\n            obj[node.id + inputName] = toRect;\r\n            obj[output.nodeId + output.portName] = fromRect;\r\n          });\r\n        }\r\n      );\r\n    }\r\n    return obj;\r\n  }, {});\r\n\r\nexport const calculateCurve = (from, to) => {\r\n  const length = to.x - from.x;\r\n  const thirdLength = length / 3;\r\n  const curve = line().curve(curveBasis)([\r\n    [from.x, from.y],\r\n    [from.x + thirdLength, from.y],\r\n    [from.x + thirdLength * 2, to.y],\r\n    [to.x, to.y]\r\n  ]);\r\n  return curve;\r\n};\r\n\r\nexport const deleteConnection = ({ id }) => {\r\n  const line = document.querySelector(`[data-connection-id=\"${id}\"]`);\r\n  if (line) line.parentNode.remove();\r\n};\r\n\r\nexport const deleteConnectionsByNodeId = nodeId => {\r\n  const lines = document.querySelectorAll(\r\n    `[data-output-node-id=\"${nodeId}\"], [data-input-node-id=\"${nodeId}\"]`\r\n  );\r\n  for (const line of lines) {\r\n    line.parentNode.remove();\r\n  }\r\n};\r\n\r\nexport const updateConnection = ({ line, from, to }) => {\r\n  line.setAttribute(\"d\", calculateCurve(from, to));\r\n};\r\n\r\nexport const createSVG = ({\r\n  from,\r\n  to,\r\n  stage,\r\n  id,\r\n  outputNodeId,\r\n  outputPortName,\r\n  inputNodeId,\r\n  inputPortName\r\n}) => {\r\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  svg.setAttribute(\"class\", styles.svg);\r\n  const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  const curve = calculateCurve(from, to)\r\n  path.setAttribute(\"d\", curve)\r\n  path.setAttribute(\"stroke\", \"rgb(185, 186, 189)\");\r\n  path.setAttribute(\"stroke-width\", \"3\");\r\n  path.setAttribute(\"stroke-linecap\", \"round\");\r\n  path.setAttribute(\"fill\", \"none\");\r\n  path.setAttribute(\"data-connection-id\", id);\r\n  path.setAttribute(\"data-output-node-id\", outputNodeId);\r\n  path.setAttribute(\"data-output-port-name\", outputPortName);\r\n  path.setAttribute(\"data-input-node-id\", inputNodeId);\r\n  path.setAttribute(\"data-input-port-name\", inputPortName);\r\n  svg.appendChild(path);\r\n  stage.appendChild(svg);\r\n  return svg;\r\n};\r\n\r\nexport const getStageRef = editorId =>\r\n  document.getElementById(`${CONNECTIONS_ID}${editorId}`);\r\n\r\nexport const createConnections = (nodes, {scale, stageId}, editorId) => {\r\n  const stageRef = getStageRef(editorId);\r\n  if(stageRef){\r\n    const stage = stageRef.getBoundingClientRect();\r\n    const stageHalfWidth = stage.width / 2;\r\n    const stageHalfHeight = stage.height / 2;\r\n\r\n    const byScale = value => (1 / scale) * value;\r\n\r\n    Object.values(nodes).forEach(node => {\r\n      if (node.connections && node.connections.inputs) {\r\n        Object.entries(node.connections.inputs).forEach(\r\n          ([inputName, outputs], k) => {\r\n            outputs.forEach(output => {\r\n              const fromPort = getPortRect(\r\n                output.nodeId,\r\n                output.portName,\r\n                \"output\"\r\n              );\r\n              const toPort = getPortRect(node.id, inputName, \"input\");\r\n              const portHalf = fromPort ? fromPort.width / 2 : 0;\r\n              if (fromPort && toPort) {\r\n                const id = output.nodeId + output.portName + node.id + inputName;\r\n                const existingLine = document.querySelector(\r\n                  `[data-connection-id=\"${id}\"]`\r\n                );\r\n                if (existingLine) {\r\n                  updateConnection({\r\n                    line: existingLine,\r\n                    from: {\r\n                      x: byScale(fromPort.x - stage.x + portHalf - stageHalfWidth),\r\n                      y: byScale(fromPort.y - stage.y + portHalf - stageHalfHeight)\r\n                    },\r\n                    to: {\r\n                      x: byScale(toPort.x - stage.x + portHalf - stageHalfWidth),\r\n                      y: byScale(toPort.y - stage.y + portHalf - stageHalfHeight)\r\n                    }\r\n                  });\r\n                } else {\r\n                  createSVG({\r\n                    id,\r\n                    outputNodeId: output.nodeId,\r\n                    outputPortName: output.portName,\r\n                    inputNodeId: node.id,\r\n                    inputPortName: inputName,\r\n                    from: {\r\n                      x: byScale(fromPort.x - stage.x + portHalf - stageHalfWidth),\r\n                      y: byScale(fromPort.y - stage.y + portHalf - stageHalfHeight)\r\n                    },\r\n                    to: {\r\n                      x: byScale(toPort.x - stage.x + portHalf - stageHalfWidth),\r\n                      y: byScale(toPort.y - stage.y + portHalf - stageHalfHeight)\r\n                    },\r\n                    stage: stageRef\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          }\r\n        );\r\n      }\r\n    });\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./Checkbox.css\";\r\nimport { nanoid }from \"nanoid/non-secure/index\";\r\n\r\nconst Checkbox = ({ label, data, onChange }) => {\r\n  const id = React.useRef(nanoid(10));\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <input\r\n        data-flume-component=\"checkbox\"\r\n        className={styles.checkbox}\r\n        type=\"checkbox\"\r\n        id={id}\r\n        value={data}\r\n        checked={data}\r\n        onChange={e => onChange(e.target.checked)}\r\n      />\r\n      <label data-flume-component=\"checkbox-label\" className={styles.label} htmlFor={id}>\r\n        {label}\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkbox;\r\n","import React from \"react\";\r\nimport styles from \"./TextInput.css\";\r\nimport { RecalculateStageRectContext } from '../../context'\r\n\r\nconst TextInput = ({\r\n  placeholder,\r\n  updateNodeConnections,\r\n  onChange,\r\n  data,\r\n  step,\r\n  type,\r\n  disableInputs\r\n}) => {\r\n  const numberInput = React.useRef()\r\n  const recalculateStageRect = React.useContext(RecalculateStageRectContext)\r\n\r\n  const handleDragEnd = () => {\r\n    document.removeEventListener(\"mousemove\", handleMouseMove);\r\n    document.removeEventListener(\"mouseup\", handleDragEnd);\r\n  };\r\n\r\n  const handleMouseMove = e => {\r\n    e.stopPropagation();\r\n    updateNodeConnections();\r\n  };\r\n\r\n  const handlePossibleResize = e => {\r\n    e.stopPropagation();\r\n    recalculateStageRect();\r\n    document.addEventListener(\"mousemove\", handleMouseMove);\r\n    document.addEventListener(\"mouseup\", handleDragEnd);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wrapper} data-flume-component=\"text-input\">\r\n      {type === \"number\" ? (\r\n        <input\r\n          disabled={disableInputs}\r\n          data-flume-component=\"text-input-number\"\r\n          onKeyDown={e => {\r\n            if (e.keyCode === 69) {\r\n              e.preventDefault()\r\n              return false;\r\n            }\r\n          }}\r\n          onChange={e => {\r\n            const inputValue = e.target.value.replace(/e/g, \"\");\r\n            if (!!inputValue) {\r\n              const value = parseFloat(inputValue, 10);\r\n              if (Number.isNaN(value)) {\r\n                onChange(0);\r\n              } else {\r\n                onChange(value);\r\n                numberInput.current.value = value;\r\n              }\r\n            }\r\n          }}\r\n          onBlur={e => {\r\n            if (!e.target.value) {\r\n              onChange(0);\r\n              numberInput.current.value = 0;\r\n            }\r\n          }}\r\n          step={step || \"1\"}\r\n          onMouseDown={handlePossibleResize}\r\n          type={type || \"text\"}\r\n          placeholder={placeholder}\r\n          className={styles.input}\r\n          defaultValue={data}\r\n          onDragStart={e => e.stopPropagation()}\r\n          ref={numberInput}\r\n        />\r\n      ) : (\r\n        <textarea\r\n          data-flume-component=\"text-input-textarea\"\r\n          onChange={e => onChange(e.target.value)}\r\n          onMouseDown={handlePossibleResize}\r\n          type=\"text\"\r\n          placeholder={placeholder}\r\n          className={styles.input}\r\n          value={data}\r\n          onDragStart={e => e.stopPropagation()}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextInput;\r\n","import React from \"react\";\r\nimport selectStyles from \"../Select/Select.css\";\r\nimport { Portal } from \"react-portal\";\r\nimport ContextMenu from \"../ContextMenu/ContextMenu\";\r\nimport styles from \"./Select.css\";\r\n\r\nconst MAX_LABEL_LENGTH = 50;\r\n\r\nconst Select = ({\r\n  options = [],\r\n  placeholder = \"[Select an option]\",\r\n  onChange,\r\n  data,\r\n  allowMultiple,\r\n  disableInputs,\r\n}) => {\r\n  const [drawerOpen, setDrawerOpen] = React.useState(false);\r\n  const [drawerCoordinates, setDrawerCoordinates] = React.useState({\r\n    x: 0,\r\n    y: 0\r\n  });\r\n  const wrapper = React.useRef();\r\n\r\n  const closeDrawer = () => {\r\n    setDrawerOpen(false);\r\n  };\r\n\r\n  const openDrawer = () => {\r\n    if (disableInputs) {\r\n      return;\r\n    }\r\n\r\n    if (!drawerOpen) {\r\n      const wrapperRect = wrapper.current.getBoundingClientRect();\r\n      setDrawerCoordinates({\r\n        x: wrapperRect.x,\r\n        y: wrapperRect.y + wrapperRect.height\r\n      });\r\n      setDrawerOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleOptionSelected = option => {\r\n    if (allowMultiple) {\r\n      onChange([...data, option.value]);\r\n    } else {\r\n      onChange(option.value)\r\n    }\r\n  };\r\n\r\n  const handleOptionDeleted = optionIndex => {\r\n    onChange([...data.slice(0, optionIndex), ...data.slice(optionIndex + 1)]);\r\n  };\r\n\r\n  const getFilteredOptions = () => (\r\n    allowMultiple ?\r\n      options.filter(opt => !data.includes(opt.value))\r\n      : options\r\n  )\r\n\r\n  const selectedOption = React.useMemo(() => {\r\n    const option = options.find(o => o.value === data);\r\n    if (option) {\r\n      return {\r\n        ...option,\r\n        label:\r\n          option.label.length > MAX_LABEL_LENGTH\r\n            ? option.label.slice(0, MAX_LABEL_LENGTH) + \"...\"\r\n            : option.label\r\n      };\r\n    }\r\n  }, [options, data]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {allowMultiple ? (\r\n        data.length ? (\r\n          <div className={styles.chipsWrapper}>\r\n            {data.map((val, i) => {\r\n              const optLabel =\r\n                (options.find(opt => opt.value === val) || {}).label || \"\";\r\n              return (\r\n                <OptionChip\r\n                  onRequestDelete={() => handleOptionDeleted(i)}\r\n                  key={val}\r\n                >\r\n                  {optLabel}\r\n                </OptionChip>\r\n              );\r\n            })}\r\n          </div>\r\n        ) : null\r\n      ) : data ? (\r\n        <SelectedOption\r\n          wrapperRef={wrapper}\r\n          option={selectedOption}\r\n          onClick={openDrawer}\r\n          disableInputs={disableInputs}\r\n        />\r\n      ) : null}\r\n      {\r\n        (allowMultiple || !data) &&\r\n        <div className={selectStyles.wrapper} ref={wrapper} onClick={openDrawer}>\r\n          {placeholder}\r\n        </div>\r\n      }\r\n      {drawerOpen && (\r\n        <Portal>\r\n          <ContextMenu\r\n            x={drawerCoordinates.x}\r\n            y={drawerCoordinates.y}\r\n            emptyText=\"There are no options\"\r\n            options={getFilteredOptions()}\r\n            onOptionSelected={handleOptionSelected}\r\n            onRequestClose={closeDrawer}\r\n          />\r\n        </Portal>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n\r\nconst SelectedOption = ({\r\n  option: { label, description } = {},\r\n  wrapperRef,\r\n  onClick,\r\n  disableInputs\r\n}) => (\r\n  <div\r\n    className={styles.selectedWrapper}\r\n    onClick={onClick}\r\n    ref={wrapperRef}\r\n    data-flume-component=\"select\"\r\n    data-disabled={disableInputs ? \"true\" : \"false\"}\r\n  >\r\n    <label data-flume-component=\"select-label\">{label}</label>\r\n    {description ? <p data-flume-component=\"select-desc\">{description}</p> : null}\r\n  </div>\r\n);\r\n\r\nconst OptionChip = ({ children, onRequestDelete }) => (\r\n  <div className={styles.chipWrapper}>\r\n    {children}\r\n    <button\r\n      className={styles.deleteButton}\r\n      onMouseDown={e => {\r\n        e.stopPropagation();\r\n      }}\r\n      onClick={onRequestDelete}\r\n    >\r\n      ✕\r\n    </button>\r\n  </div>\r\n);\r\n","import React from \"react\";\r\nimport styles from \"./Control.css\";\r\nimport Checkbox from \"../Checkbox/Checkbox\";\r\nimport TextInput from \"../TextInput/TextInput\";\r\nimport Select from \"../Select/Select\";\r\nimport { NodeDispatchContext, ContextContext } from \"../../context\";\r\n\r\nconst Control = ({\r\n  type,\r\n  name,\r\n  nodeId,\r\n  portName,\r\n  label,\r\n  inputLabel,\r\n  data,\r\n  allData,\r\n  render,\r\n  step,\r\n  options = [],\r\n  placeholder,\r\n  inputData,\r\n  triggerRecalculation,\r\n  updateNodeConnections,\r\n  getOptions,\r\n  setValue,\r\n  defaultValue,\r\n  isMonoControl,\r\n  disableInputs\r\n}) => {\r\n  const nodesDispatch = React.useContext(NodeDispatchContext);\r\n  const executionContext = React.useContext(ContextContext);\r\n\r\n  const calculatedLabel = isMonoControl ? inputLabel : label;\r\n\r\n  const onChange = data => {\r\n    nodesDispatch({\r\n      type: \"SET_PORT_DATA\",\r\n      data,\r\n      nodeId,\r\n      portName,\r\n      controlName: name,\r\n      setValue\r\n    });\r\n    triggerRecalculation();\r\n  };\r\n\r\n  const getControlByType = type => {\r\n    const commonProps = {\r\n      triggerRecalculation,\r\n      updateNodeConnections,\r\n      onChange,\r\n      data\r\n    };\r\n    switch (type) {\r\n      case \"select\":\r\n        return (\r\n          <Select\r\n            {...commonProps}\r\n            options={\r\n              getOptions ? getOptions(inputData, executionContext) : options\r\n            }\r\n            placeholder={placeholder}\r\n            disableInputs={disableInputs}\r\n          />\r\n        );\r\n      case \"text\":\r\n        return <TextInput {...commonProps} placeholder={placeholder} />;\r\n      case \"number\":\r\n        return (\r\n          <TextInput\r\n            {...commonProps}\r\n            step={step}\r\n            type=\"number\"\r\n            placeholder={placeholder}\r\n            disableInputs={disableInputs}\r\n          />\r\n        );\r\n      case \"checkbox\":\r\n        return <Checkbox {...commonProps} label={calculatedLabel} />;\r\n      case \"multiselect\":\r\n        return (\r\n          <Select\r\n            allowMultiple\r\n            {...commonProps}\r\n            options={\r\n              getOptions ? getOptions(inputData, executionContext) : options\r\n            }\r\n            placeholder={placeholder}\r\n            label={label}\r\n          />\r\n        );\r\n      case \"custom\":\r\n        return render(data, onChange, executionContext, triggerRecalculation, {\r\n          label,\r\n          name,\r\n          portName,\r\n          inputLabel,\r\n          defaultValue\r\n        }, allData);\r\n      default:\r\n        return <div>Control</div>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wrapper} data-flume-component=\"control\">\r\n      {calculatedLabel && type !== \"checkbox\" && type !== \"custom\" && (\r\n        <label data-flume-component=\"control-label\" className={styles.controlLabel}>{calculatedLabel}</label>\r\n      )}\r\n      {getControlByType(type)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Control;\r\n","import React from \"react\";\r\nimport {calculateCurve} from '../../connectionCalculator'\r\nimport styles from \"./Connection.css\";\r\n\r\nconst Connection = ({\r\n  from,\r\n  to,\r\n  id,\r\n  lineRef,\r\n  outputNodeId,\r\n  outputPortName,\r\n  inputNodeId,\r\n  inputPortName\r\n}) => {\r\n  const curve = calculateCurve(from, to)\r\n  return (\r\n    <svg className={styles.svg} data-flume-component=\"connection-svg\">\r\n      <path\r\n        data-connection-id={id}\r\n        data-output-node-id={outputNodeId}\r\n        data-output-port-name={outputPortName}\r\n        data-input-node-id={inputNodeId}\r\n        data-input-port-name={inputPortName}\r\n        data-flume-component=\"connection-path\"\r\n        stroke=\"rgb(185, 186, 189)\"\r\n        fill=\"none\"\r\n        strokeWidth={3}\r\n        strokeLinecap=\"round\"\r\n        d={curve}\r\n        ref={lineRef}\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default Connection;\r\n","import React from 'react'\r\n\r\nconst usePrevious = value => {\r\n  const ref = React.useRef();\r\n  React.useEffect(() => {\r\n    ref.current = value;\r\n  }, [ref.current]);\r\n  return ref.current;\r\n}\r\n\r\nexport default usePrevious\r\n","import React from \"react\";\r\nimport styles from \"./IoPorts.css\";\r\nimport { Portal } from \"react-portal\";\r\nimport {\r\n  NodeDispatchContext,\r\n  ConnectionRecalculateContext,\r\n  StageContext,\r\n  ContextContext,\r\n  EditorIdContext\r\n} from \"../../context\";\r\nimport Control from \"../Control/Control\";\r\nimport Connection from \"../Connection/Connection\";\r\nimport { PortTypesContext } from \"../../context\";\r\nimport usePrevious from \"../../hooks/usePrevious\";\r\nimport { calculateCurve, getPortRect } from \"../../connectionCalculator\";\r\nimport { STAGE_ID, DRAG_CONNECTION_ID } from '../../constants'\r\n\r\nfunction useTransputs (transputsFn, transputType, nodeId, inputData, connections) {\r\n  const nodesDispatch = React.useContext(NodeDispatchContext);\r\n  const executionContext = React.useContext(ContextContext);\r\n\r\n  const transputs = React.useMemo(() => {\r\n    if (Array.isArray(transputsFn)) return transputsFn;\r\n    return transputsFn(inputData, connections, executionContext);\r\n  }, [transputsFn, inputData, connections, executionContext]);\r\n  const prevTransputs = usePrevious(transputs);\r\n\r\n  React.useEffect(() => {\r\n    if (!prevTransputs || Array.isArray(transputsFn)) return;\r\n    for (const transput of prevTransputs) {\r\n      const current = transputs.find(({ name }) => transput.name === name);\r\n      if (!current) {\r\n        nodesDispatch({\r\n          type: 'DESTROY_TRANSPUT',\r\n          transputType,\r\n          transput: { nodeId, portName: '' + transput.name }\r\n        });\r\n      }\r\n    }\r\n  }, [transputsFn, transputs, prevTransputs, nodesDispatch, nodeId, transputType]);\r\n\r\n  return transputs;\r\n}\r\n\r\nconst IoPorts = ({\r\n  nodeId,\r\n  inputs = [],\r\n  outputs = [],\r\n  connections,\r\n  inputData,\r\n  updateNodeConnections,\r\n  disableInputs,\r\n}) => {\r\n  const inputTypes = React.useContext(PortTypesContext);\r\n  const triggerRecalculation = React.useContext(ConnectionRecalculateContext);\r\n  const resolvedInputs = useTransputs(inputs, 'input', nodeId, inputData, connections);\r\n  const resolvedOutputs = useTransputs(outputs, 'output', nodeId, inputData, connections);\r\n  \r\n  return (\r\n    <div className={styles.wrapper} data-flume-component=\"ports\">\r\n      {resolvedInputs.length ? (\r\n        <div className={styles.inputs} data-flume-component=\"ports-inputs\">\r\n          {resolvedInputs.map(input => (\r\n            <Input\r\n              {...input}\r\n              data={inputData[input.name] || {}}\r\n              isConnected={!!connections.inputs[input.name]}\r\n              triggerRecalculation={triggerRecalculation}\r\n              updateNodeConnections={updateNodeConnections}\r\n              inputTypes={inputTypes}\r\n              nodeId={nodeId}\r\n              inputData={inputData}\r\n              key={input.name}\r\n              disableInputs={disableInputs}\r\n            />\r\n          ))}\r\n        </div>\r\n      ) : null}\r\n      {!!resolvedOutputs.length && (\r\n        <div className={styles.outputs} data-flume-component=\"ports-outputs\">\r\n          {resolvedOutputs.map(output => (\r\n            <Output\r\n              {...output}\r\n              triggerRecalculation={triggerRecalculation}\r\n              inputTypes={inputTypes}\r\n              nodeId={nodeId}\r\n              inputData={inputData}\r\n              portOnRight\r\n              key={output.name}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IoPorts;\r\n\r\nconst Input = ({\r\n  type,\r\n  label,\r\n  name,\r\n  nodeId,\r\n  data,\r\n  controls: localControls,\r\n  inputTypes,\r\n  noControls,\r\n  triggerRecalculation,\r\n  updateNodeConnections,\r\n  isConnected,\r\n  inputData,\r\n  hidePort,\r\n  disableInputs\r\n}) => {\r\n  const { label: defaultLabel, color, controls: defaultControls = [] } =\r\n    inputTypes[type] || {};\r\n  const prevConnected = usePrevious(isConnected);\r\n\r\n  const controls = localControls || defaultControls;\r\n\r\n  React.useEffect(() => {\r\n    if (isConnected !== prevConnected) {\r\n      triggerRecalculation();\r\n    }\r\n  }, [isConnected, prevConnected, triggerRecalculation]);\r\n\r\n  return (\r\n    <div\r\n      data-flume-component=\"port-input\"\r\n      className={styles.transput}\r\n      data-controlless={isConnected || noControls || !controls.length}\r\n      onDragStart={e => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }}\r\n    >\r\n      {!hidePort ? (\r\n        <Port\r\n          type={type}\r\n          color={color}\r\n          name={name}\r\n          nodeId={nodeId}\r\n          isInput\r\n          triggerRecalculation={triggerRecalculation}\r\n        />\r\n      ) : null}\r\n      {(!controls.length || noControls || isConnected) && (\r\n        <label data-flume-component=\"port-label\" className={styles.portLabel}>{label || defaultLabel}</label>\r\n      )}\r\n      {!noControls && !isConnected\r\n        ? (\r\n          <div className={styles.controls}>\r\n            {\r\n              controls.map(control => (\r\n                  <Control\r\n                    {...control}\r\n                    nodeId={nodeId}\r\n                    portName={name}\r\n                    triggerRecalculation={triggerRecalculation}\r\n                    updateNodeConnections={updateNodeConnections}\r\n                    inputLabel={label}\r\n                    data={data[control.name]}\r\n                    allData={data}\r\n                    key={control.name}\r\n                    inputData={inputData}\r\n                    isMonoControl={controls.length === 1}\r\n                    disableInputs={disableInputs}\r\n                  />\r\n                ))\r\n            }\r\n          </div>\r\n        )\r\n        : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Output = ({\r\n  label,\r\n  name,\r\n  nodeId,\r\n  type,\r\n  inputTypes,\r\n  triggerRecalculation\r\n}) => {\r\n  const { label: defaultLabel, color } = inputTypes[type] || {};\r\n\r\n  return (\r\n    <div\r\n      data-flume-component=\"port-output\"\r\n      className={styles.transput}\r\n      data-controlless={true}\r\n      onDragStart={e => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }}\r\n    >\r\n      <label data-flume-component=\"port-label\" className={styles.portLabel}>{label || defaultLabel}</label>\r\n      <Port\r\n        type={type}\r\n        name={name}\r\n        color={color}\r\n        nodeId={nodeId}\r\n        triggerRecalculation={triggerRecalculation}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Port = ({\r\n  color = \"grey\",\r\n  name = \"\",\r\n  type,\r\n  isInput,\r\n  nodeId,\r\n  triggerRecalculation\r\n}) => {\r\n  const nodesDispatch = React.useContext(NodeDispatchContext);\r\n  const stageState = React.useContext(StageContext);\r\n  const editorId = React.useContext(EditorIdContext);\r\n  const stageId = `${STAGE_ID}${editorId}`\r\n  const inputTypes = React.useContext(PortTypesContext);\r\n  const [isDragging, setIsDragging] = React.useState(false);\r\n  const [dragStartCoordinates, setDragStartCoordinates] = React.useState({\r\n    x: 0,\r\n    y: 0\r\n  });\r\n  const dragStartCoordinatesCache = React.useRef(dragStartCoordinates);\r\n  const port = React.useRef();\r\n  const line = React.useRef();\r\n  const lineInToPort = React.useRef();\r\n\r\n  const byScale = value => (1 / stageState.scale) * value;\r\n\r\n  const handleDrag = e => {\r\n    const stage = document\r\n      .getElementById(stageId)\r\n      .getBoundingClientRect();\r\n\r\n    if (isInput) {\r\n      const to = {\r\n        x:\r\n          byScale(e.clientX - stage.x - stage.width / 2) +\r\n          byScale(stageState.translate.x),\r\n        y:\r\n          byScale(e.clientY - stage.y - stage.height / 2) +\r\n          byScale(stageState.translate.y)\r\n      };\r\n      lineInToPort.current.setAttribute(\r\n        \"d\",\r\n        calculateCurve(dragStartCoordinatesCache.current, to)\r\n      );\r\n    } else {\r\n      const to = {\r\n        x:\r\n          byScale(e.clientX - stage.x - stage.width / 2) +\r\n          byScale(stageState.translate.x),\r\n        y:\r\n          byScale(e.clientY - stage.y - stage.height / 2) +\r\n          byScale(stageState.translate.y)\r\n      };\r\n      line.current.setAttribute(\r\n        \"d\",\r\n        calculateCurve(dragStartCoordinatesCache.current, to)\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleDragEnd = e => {\r\n    const droppedOnPort = !!e.target.dataset.portName;\r\n\r\n    if (isInput) {\r\n      const {\r\n        inputNodeId,\r\n        inputPortName,\r\n        outputNodeId,\r\n        outputPortName\r\n      } = lineInToPort.current.dataset;\r\n      nodesDispatch({\r\n        type: \"REMOVE_CONNECTION\",\r\n        input: { nodeId: inputNodeId, portName: inputPortName },\r\n        output: { nodeId: outputNodeId, portName: outputPortName }\r\n      });\r\n      if (droppedOnPort) {\r\n        const {\r\n          portName: connectToPortName,\r\n          nodeId: connectToNodeId,\r\n          portType: connectToPortType,\r\n          portTransputType: connectToTransputType\r\n        } = e.target.dataset;\r\n        const isNotSameNode = outputNodeId !== connectToNodeId;\r\n        if (isNotSameNode && connectToTransputType !== \"output\") {\r\n          const inputWillAcceptConnection = inputTypes[\r\n            connectToPortType\r\n          ].acceptTypes.includes(type);\r\n          if (inputWillAcceptConnection) {\r\n            nodesDispatch({\r\n              type: \"ADD_CONNECTION\",\r\n              input: { nodeId: connectToNodeId, portName: connectToPortName },\r\n              output: { nodeId: outputNodeId, portName: outputPortName }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      if (droppedOnPort) {\r\n        const {\r\n          portName: inputPortName,\r\n          nodeId: inputNodeId,\r\n          portType: inputNodeType,\r\n          portTransputType: inputTransputType\r\n        } = e.target.dataset;\r\n        const isNotSameNode = inputNodeId !== nodeId;\r\n        if (isNotSameNode && inputTransputType !== \"output\") {\r\n          const inputWillAcceptConnection = inputTypes[\r\n            inputNodeType\r\n          ].acceptTypes.includes(type);\r\n          if (inputWillAcceptConnection) {\r\n            nodesDispatch({\r\n              type: \"ADD_CONNECTION\",\r\n              output: { nodeId, portName: name },\r\n              input: { nodeId: inputNodeId, portName: inputPortName }\r\n            });\r\n            triggerRecalculation();\r\n          }\r\n        }\r\n      }\r\n    }\r\n    setIsDragging(false);\r\n    document.removeEventListener(\"mouseup\", handleDragEnd);\r\n    document.removeEventListener(\"mousemove\", handleDrag);\r\n  };\r\n\r\n  const handleDragStart = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const startPort = port.current.getBoundingClientRect();\r\n    const stage = document\r\n      .getElementById(stageId)\r\n      .getBoundingClientRect();\r\n\r\n    if (isInput) {\r\n      lineInToPort.current = document.querySelector(\r\n        `[data-input-node-id=\"${nodeId}\"][data-input-port-name=\"${name}\"]`\r\n      );\r\n      const portIsConnected = !!lineInToPort.current;\r\n      if (portIsConnected) {\r\n        lineInToPort.current.parentNode.style.zIndex = 9999;\r\n        const outputPort = getPortRect(\r\n          lineInToPort.current.dataset.outputNodeId,\r\n          lineInToPort.current.dataset.outputPortName,\r\n          \"output\"\r\n        );\r\n        const coordinates = {\r\n          x:\r\n            byScale(\r\n              outputPort.x - stage.x + outputPort.width / 2 - stage.width / 2\r\n            ) + byScale(stageState.translate.x),\r\n          y:\r\n            byScale(\r\n              outputPort.y - stage.y + outputPort.width / 2 - stage.height / 2\r\n            ) + byScale(stageState.translate.y)\r\n        };\r\n        setDragStartCoordinates(coordinates);\r\n        dragStartCoordinatesCache.current = coordinates;\r\n        setIsDragging(true);\r\n        document.addEventListener(\"mouseup\", handleDragEnd);\r\n        document.addEventListener(\"mousemove\", handleDrag);\r\n      }\r\n    } else {\r\n      const coordinates = {\r\n        x:\r\n          byScale(\r\n            startPort.x - stage.x + startPort.width / 2 - stage.width / 2\r\n          ) + byScale(stageState.translate.x),\r\n        y:\r\n          byScale(\r\n            startPort.y - stage.y + startPort.width / 2 - stage.height / 2\r\n          ) + byScale(stageState.translate.y)\r\n      };\r\n      setDragStartCoordinates(coordinates);\r\n      dragStartCoordinatesCache.current = coordinates;\r\n      setIsDragging(true);\r\n      document.addEventListener(\"mouseup\", handleDragEnd);\r\n      document.addEventListener(\"mousemove\", handleDrag);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        style={{ zIndex: 999 }}\r\n        onMouseDown={handleDragStart}\r\n        className={styles.port}\r\n        data-port-color={color}\r\n        data-port-name={name}\r\n        data-port-type={type}\r\n        data-port-transput-type={isInput ? \"input\" : \"output\"}\r\n        data-node-id={nodeId}\r\n        data-flume-component=\"port-handle\"\r\n        onDragStart={e => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }}\r\n        ref={port}\r\n      />\r\n      {isDragging && !isInput ? (\r\n        <Portal\r\n          node={document.getElementById(`${DRAG_CONNECTION_ID}${editorId}`)}\r\n        >\r\n          <Connection\r\n            from={dragStartCoordinates}\r\n            to={dragStartCoordinates}\r\n            lineRef={line}\r\n          />\r\n        </Portal>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./Node.css\";\r\nimport {\r\n  NodeTypesContext,\r\n  NodeDispatchContext,\r\n  StageContext,\r\n  CacheContext\r\n} from \"../../context\";\r\nimport { getPortRect, calculateCurve } from \"../../connectionCalculator\";\r\nimport { Portal } from \"react-portal\";\r\nimport ContextMenu from \"../ContextMenu/ContextMenu\";\r\nimport IoPorts from \"../IoPorts/IoPorts\";\r\nimport Draggable from \"../Draggable/Draggable\";\r\n\r\nconst Node = ({\r\n  id,\r\n  width,\r\n  x,\r\n  y,\r\n  stageRect,\r\n  connections,\r\n  type,\r\n  inputData,\r\n  onDragStart,\r\n  renderNodeHeader,\r\n  disableInputs\r\n}) => {\r\n  const cache = React.useContext(CacheContext);\r\n  const nodeTypes = React.useContext(NodeTypesContext);\r\n  const nodesDispatch = React.useContext(NodeDispatchContext);\r\n  const stageState = React.useContext(StageContext);\r\n  const currentNodeType = nodeTypes[type];\r\n  const { label, deletable, inputs = [], outputs = [] } = currentNodeType;\r\n\r\n  const nodeWrapper = React.useRef();\r\n  const [menuOpen, setMenuOpen] = React.useState(false);\r\n  const [menuCoordinates, setMenuCoordinates] = React.useState({ x: 0, y: 0 });\r\n\r\n  const byScale = value => (1 / stageState.scale) * value;\r\n\r\n  const updateConnectionsByTransput = (transput = {}, isOutput) => {\r\n    Object.entries(transput).forEach(([portName, outputs]) => {\r\n      outputs.forEach(output => {\r\n        const toRect = getPortRect(\r\n          id,\r\n          portName,\r\n          isOutput ? \"output\" : \"input\",\r\n          cache\r\n        );\r\n        const fromRect = getPortRect(\r\n          output.nodeId,\r\n          output.portName,\r\n          isOutput ? \"input\" : \"output\",\r\n          cache\r\n        );\r\n        const portHalf = fromRect.width / 2;\r\n        let combined;\r\n        if (isOutput) {\r\n          combined = id + portName + output.nodeId + output.portName;\r\n        } else {\r\n          combined = output.nodeId + output.portName + id + portName;\r\n        }\r\n        let cnx;\r\n        const cachedConnection = cache.current.connections[combined];\r\n        if (cachedConnection) {\r\n          cnx = cachedConnection;\r\n        } else {\r\n          cnx = document.querySelector(`[data-connection-id=\"${combined}\"]`);\r\n          cache.current.connections[combined] = cnx;\r\n        }\r\n        const from = {\r\n          x:\r\n            byScale(\r\n              toRect.x -\r\n                stageRect.current.x +\r\n                portHalf -\r\n                stageRect.current.width / 2\r\n            ) + byScale(stageState.translate.x),\r\n          y:\r\n            byScale(\r\n              toRect.y -\r\n                stageRect.current.y +\r\n                portHalf -\r\n                stageRect.current.height / 2\r\n            ) + byScale(stageState.translate.y)\r\n        };\r\n        const to = {\r\n          x:\r\n            byScale(\r\n              fromRect.x -\r\n                stageRect.current.x +\r\n                portHalf -\r\n                stageRect.current.width / 2\r\n            ) + byScale(stageState.translate.x),\r\n          y:\r\n            byScale(\r\n              fromRect.y -\r\n                stageRect.current.y +\r\n                portHalf -\r\n                stageRect.current.height / 2\r\n            ) + byScale(stageState.translate.y)\r\n        };\r\n        cnx.setAttribute(\"d\", calculateCurve(from, to));\r\n      });\r\n    });\r\n  };\r\n\r\n  const updateNodeConnections = () => {\r\n    if (connections) {\r\n      updateConnectionsByTransput(connections.inputs);\r\n      updateConnectionsByTransput(connections.outputs, true);\r\n    }\r\n  };\r\n\r\n  const stopDrag = (e, coordinates) => {\r\n    nodesDispatch({\r\n      type: \"SET_NODE_COORDINATES\",\r\n      ...coordinates,\r\n      nodeId: id\r\n    });\r\n  };\r\n\r\n  const handleDrag = ({ x, y }) => {\r\n    nodeWrapper.current.style.transform = `translate(${x}px,${y}px)`;\r\n    updateNodeConnections();\r\n  };\r\n\r\n  const startDrag = e => {\r\n    onDragStart();\r\n  };\r\n\r\n  const handleContextMenu = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setMenuCoordinates({ x: e.clientX, y: e.clientY });\r\n    setMenuOpen(true);\r\n    return false;\r\n  };\r\n\r\n  const closeContextMenu = () => {\r\n    setMenuOpen(false);\r\n  };\r\n\r\n  const deleteNode = () => {\r\n    nodesDispatch({\r\n      type: \"REMOVE_NODE\",\r\n      nodeId: id\r\n    });\r\n  };\r\n\r\n  const handleMenuOption = ({ value }) => {\r\n    switch (value) {\r\n      case \"deleteNode\":\r\n        deleteNode();\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Draggable\r\n      className={styles.wrapper}\r\n      style={{\r\n        width,\r\n        transform: `translate(${x}px, ${y}px)`\r\n      }}\r\n      onDragStart={startDrag}\r\n      onDrag={handleDrag}\r\n      onDragEnd={stopDrag}\r\n      innerRef={nodeWrapper}\r\n      data-node-id={id}\r\n      data-flume-component=\"node\"\r\n      data-flume-node-type={currentNodeType.type}\r\n      onContextMenu={handleContextMenu}\r\n      stageState={stageState}\r\n      stageRect={stageRect}\r\n    >\r\n      {renderNodeHeader ? (\r\n        renderNodeHeader(NodeHeader, currentNodeType, {\r\n          openMenu: handleContextMenu,\r\n          closeMenu: closeContextMenu,\r\n          deleteNode\r\n        })\r\n      ) : (\r\n        <NodeHeader>{label}</NodeHeader>\r\n      )}\r\n      <IoPorts\r\n        nodeId={id}\r\n        inputs={inputs}\r\n        outputs={outputs}\r\n        connections={connections}\r\n        updateNodeConnections={updateNodeConnections}\r\n        inputData={inputData}\r\n        disableInputs={disableInputs}\r\n      />\r\n      {menuOpen ? (\r\n        <Portal>\r\n          <ContextMenu\r\n            x={menuCoordinates.x}\r\n            y={menuCoordinates.y}\r\n            options={[\r\n              ...(deletable !== false\r\n                ? [\r\n                    {\r\n                      label: \"Delete Node\",\r\n                      value: \"deleteNode\",\r\n                      description: \"Deletes a node and all of its connections.\"\r\n                    }\r\n                  ]\r\n                : [])\r\n            ]}\r\n            onRequestClose={closeContextMenu}\r\n            onOptionSelected={handleMenuOption}\r\n            hideFilter\r\n            label=\"Node Options\"\r\n            emptyText=\"This node has no options.\"\r\n          />\r\n        </Portal>\r\n      ) : null}\r\n    </Draggable>\r\n  );\r\n};\r\n\r\nconst NodeHeader = ({ children, className = \"\", ...props }) => (\r\n  <h2 {...props} className={styles.label + (className ? ` ${className}` : \"\")} data-flume-component=\"node-header\">\r\n    {children}\r\n  </h2>\r\n);\r\n\r\nexport default Node;\r\n","const define = (value, defaultValue) =>\r\n  value !== undefined ? value : defaultValue;\r\n\r\nconst buildControlType = (\r\n  defaultConfig,\r\n  validate = () => {},\r\n  setup = () => ({})\r\n) => config => {\r\n  validate(config);\r\n  return {\r\n    type: defaultConfig.type,\r\n    label: define(config.label, defaultConfig.label || \"\"),\r\n    name: define(config.name, defaultConfig.name || \"\"),\r\n    defaultValue: define(config.defaultValue, defaultConfig.defaultValue),\r\n    setValue: define(config.setValue, undefined),\r\n    ...setup(config)\r\n  };\r\n};\r\n\r\nexport const Controls = {\r\n  text: buildControlType({\r\n    type: \"text\",\r\n    name: \"text\",\r\n    defaultValue: \"\"\r\n  }),\r\n  select: buildControlType(\r\n    {\r\n      type: \"select\",\r\n      name: \"select\",\r\n      options: [],\r\n      defaultValue: \"\"\r\n    },\r\n    () => {},\r\n    config => ({\r\n      options: define(config.options, []),\r\n      getOptions: define(config.getOptions, undefined),\r\n      placeholder: define(config.placeholder, undefined)\r\n    })\r\n  ),\r\n  number: buildControlType(\r\n    {\r\n      type: \"number\",\r\n      name: \"number\",\r\n      defaultValue: 0\r\n    },\r\n    () => {},\r\n    config => ({\r\n      step: define(config.step, undefined)\r\n    })\r\n  ),\r\n  checkbox: buildControlType({\r\n    type: \"checkbox\",\r\n    name: \"checkbox\",\r\n    defaultValue: false\r\n  }),\r\n  multiselect: buildControlType(\r\n    {\r\n      type: \"multiselect\",\r\n      name: \"multiselect\",\r\n      options: [],\r\n      defaultValue: []\r\n    },\r\n    () => {},\r\n    config => ({\r\n      options: define(config.options, []),\r\n      getOptions: define(config.getOptions, undefined),\r\n      placeholder: define(config.placeholder, undefined)\r\n    })\r\n  ),\r\n  custom: buildControlType(\r\n    {\r\n      type: \"custom\",\r\n      name: \"custom\",\r\n      render: () => {},\r\n      defaultValue: undefined\r\n    },\r\n    () => {},\r\n    config => ({\r\n      render: define(config.render, () => {})\r\n    })\r\n  )\r\n};\r\n\r\nexport const Colors = {\r\n  yellow: \"yellow\",\r\n  orange: \"orange\",\r\n  red: \"red\",\r\n  pink: \"pink\",\r\n  purple: \"purple\",\r\n  blue: \"blue\",\r\n  green: \"green\",\r\n  grey: \"grey\"\r\n};\r\n\r\nexport const getPortBuilders = ports =>\r\n  Object.values(ports).reduce((obj, port) => {\r\n    obj[port.type] = (config = {}) => {\r\n      return {\r\n        type: port.type,\r\n        name: config.name || port.name,\r\n        label: config.label || port.label,\r\n        noControls: define(config.noControls, false),\r\n        color: config.color || port.color,\r\n        hidePort: define(config.hidePort, port.hidePort),\r\n        controls: define(config.controls, port.controls)\r\n      };\r\n    };\r\n    return obj;\r\n  }, {});\r\n\r\nexport class FlumeConfig {\r\n  constructor(config) {\r\n    if (config) {\r\n      this.nodeTypes = { ...config.nodeTypes };\r\n      this.portTypes = { ...config.portTypes };\r\n    } else {\r\n      this.nodeTypes = {};\r\n      this.portTypes = {};\r\n    }\r\n  }\r\n  addRootNodeType(config) {\r\n    this.addNodeType({\r\n      ...config,\r\n      root: true,\r\n      addable: false,\r\n      deletable: false\r\n    })\r\n    return this;\r\n  }\r\n  addNodeType(config) {\r\n    if (typeof config !== \"object\" && config !== null) {\r\n      throw new Error(\r\n        \"You must provide a configuration object when calling addNodeType.\"\r\n      );\r\n    }\r\n    if (typeof config.type !== \"string\") {\r\n      throw new Error(\r\n        `Required key, \"type\" must be a string when calling addNodeType.`\r\n      );\r\n    }\r\n    if (\r\n      typeof config.initialWidth !== \"undefined\" &&\r\n      typeof config.initialWidth !== \"number\"\r\n    ) {\r\n      throw new Error(\r\n        `Optional key, \"initialWidth\" must be a number when calling addNodeType.`\r\n      );\r\n    }\r\n    if (this.nodeTypes[config.type] !== undefined) {\r\n      throw new Error(\r\n        `A node with type \"${config.type}\" has already been declared.`\r\n      );\r\n    }\r\n    const node = {\r\n      type: config.type,\r\n      label: define(config.label, \"\"),\r\n      description: define(config.description, \"\"),\r\n      addable: define(config.addable, true),\r\n      deletable: define(config.deletable, true)\r\n    };\r\n    if (config.initialWidth) {\r\n      node.initialWidth = config.initialWidth;\r\n    }\r\n    if (config.sortIndex !== undefined) {\r\n      node.sortIndex = config.sortIndex;\r\n    }\r\n    if (typeof config.inputs === \"function\") {\r\n      const inputs = config.inputs(getPortBuilders(this.portTypes));\r\n      if (!Array.isArray(inputs) && typeof config.inputs !== 'function') {\r\n        throw new Error(\r\n          `When providing a function to the \"inputs\" key, you must return either an array or a function.`\r\n        );\r\n      }\r\n      node.inputs = inputs;\r\n    } else if (config.inputs === undefined) {\r\n      node.inputs = [];\r\n    } else if (!Array.isArray(config.inputs)) {\r\n      throw new Error(`Optional key, \"inputs\" must be an array.`);\r\n    } else {\r\n      node.inputs = config.inputs;\r\n    }\r\n\r\n    if (typeof config.outputs === \"function\") {\r\n      const outputs = config.outputs(getPortBuilders(this.portTypes));\r\n      if (!Array.isArray(outputs) && typeof config.outputs !== 'function') {\r\n        throw new Error(\r\n          `When providing a function to the \"outputs\" key, you must return either an array or a function.`\r\n        );\r\n      }\r\n      node.outputs = outputs;\r\n    } else if (config.outputs === undefined) {\r\n      node.outputs = [];\r\n    } else if (config.outputs !== undefined && !Array.isArray(config.outputs)) {\r\n      throw new Error(`Optional key, \"outputs\" must be an array.`);\r\n    } else {\r\n      node.outputs = config.outputs;\r\n    }\r\n\r\n    if (config.root !== undefined) {\r\n      if (typeof config.root !== \"boolean\") {\r\n        throw new Error(`Optional key, \"root\" must be a boolean.`);\r\n      } else {\r\n        node.root = config.root;\r\n      }\r\n    }\r\n\r\n    this.nodeTypes[config.type] = node;\r\n    return this;\r\n  }\r\n  removeNodeType(type) {\r\n    if (!this.nodeTypes[type]) {\r\n      console.error(`Non-existent node type \"${type}\" cannot be removed.`);\r\n    } else {\r\n      const { [type]: deleted, ...nodeTypes } = this.nodeTypes;\r\n      this.nodeTypes = nodeTypes;\r\n    }\r\n    return this;\r\n  }\r\n  addPortType(config) {\r\n    if (typeof config !== \"object\" && config !== null) {\r\n      throw new Error(\r\n        \"You must provide a configuration object when calling addPortType\"\r\n      );\r\n    }\r\n    if (typeof config.type !== \"string\") {\r\n      throw new Error(\r\n        `Required key, \"type\" must be a string when calling addPortType.`\r\n      );\r\n    }\r\n    if (this.portTypes[config.type] !== undefined) {\r\n      throw new Error(\r\n        `A port with type \"${config.type}\" has already been declared.`\r\n      );\r\n    }\r\n    if (typeof config.name !== \"string\") {\r\n      throw new Error(\r\n        `Required key, \"name\" must be a string when calling addPortType.`\r\n      );\r\n    }\r\n\r\n    const port = {\r\n      type: config.type,\r\n      name: config.name,\r\n      label: define(config.label, \"\"),\r\n      color: define(config.color, Colors.grey),\r\n      hidePort: define(config.hidePort, false)\r\n    };\r\n\r\n    if (config.acceptTypes === undefined) {\r\n      port.acceptTypes = [config.type];\r\n    } else if (!Array.isArray(config.acceptTypes)) {\r\n      throw new Error(`Optional key, \"acceptTypes\" must be an array.`);\r\n    } else {\r\n      port.acceptTypes = config.acceptTypes;\r\n    }\r\n\r\n    if (config.controls === undefined) {\r\n      port.controls = [];\r\n    } else if (!Array.isArray(config.controls)) {\r\n      throw new Error(`Optional key, \"controls\" must be an array.`);\r\n    } else {\r\n      port.controls = config.controls;\r\n    }\r\n\r\n    this.portTypes[config.type] = port;\r\n    return this;\r\n  }\r\n  removePortType(type, { skipDynamicNodesCheck = false } = {}) {\r\n    if (!this.portTypes[type]) {\r\n      console.error(`Non-existent port type \"${type}\" cannot be removed.`);\r\n    } else {\r\n      if (!skipDynamicNodesCheck) {\r\n        const dynamicNodes = Object.values(this.nodeTypes).filter(\r\n          node =>\r\n            typeof node.inputs === 'function' ||\r\n            typeof node.outputs === 'function'\r\n        );\r\n        if (dynamicNodes.length) {\r\n          console.warn(\r\n            `We've detected that one or more of your nodes is using dynamic inputs/outputs. This is a potentially dangerous operation as we are unable to detect if this portType is being used in one of those nodes. You can quiet this message by passing { skipDynamicNodesCheck: true } in as the second argument.`\r\n          );\r\n        }  \r\n      }\r\n      const affectedNodes = Object.values(this.nodeTypes).filter(\r\n        node =>\r\n          (Array.isArray(node.inputs) &&\r\n            node.inputs.find(p => p.type === type)) ||\r\n          (Array.isArray(node.outputs) &&\r\n            node.outputs.find(p => p.type === type))\r\n      );\r\n      if (affectedNodes.length) {\r\n        throw new Error(\r\n          `Cannot delete port type \"${type}\" without first deleting all node types using these ports: [${affectedNodes\r\n            .map(n => `${n.type}`)\r\n            .join(\", \")}]`\r\n        );\r\n      } else {\r\n        const { [type]: deleted, ...portTypes } = this.portTypes;\r\n        this.portTypes = portTypes;\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport styles from \"./ColorPicker.css\";\r\nimport { Colors } from \"../../typeBuilders\";\r\n\r\nexport default ({ x, y, onColorPicked, onRequestClose }) => {\r\n  const wrapper = React.useRef();\r\n\r\n  const testClickOutside = React.useCallback(\r\n    e => {\r\n      if (wrapper.current && !wrapper.current.contains(e.target)) {\r\n        onRequestClose();\r\n        document.removeEventListener(\"click\", testClickOutside);\r\n        document.removeEventListener(\"contextmenu\", testClickOutside);\r\n      }\r\n    },\r\n    [wrapper, onRequestClose]\r\n  );\r\n\r\n  const testEscape = React.useCallback(\r\n    e => {\r\n      if (e.keyCode === 27) {\r\n        onRequestClose();\r\n        document.removeEventListener(\"keydown\", testEscape);\r\n      }\r\n    },\r\n    [onRequestClose]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    document.addEventListener(\"keydown\", testEscape);\r\n    document.addEventListener(\"click\", testClickOutside);\r\n    document.addEventListener(\"contextmenu\", testClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"click\", testClickOutside);\r\n      document.removeEventListener(\"contextmenu\", testClickOutside);\r\n      document.removeEventListener(\"keydown\", testEscape);\r\n    };\r\n  }, [testClickOutside, testEscape]);\r\n\r\n  return (\r\n    <div\r\n      data-flume-component=\"color-picker\"\r\n      ref={wrapper}\r\n      className={styles.wrapper}\r\n      style={{\r\n        left: x,\r\n        top: y\r\n      }}\r\n    >\r\n      {Object.values(Colors).map(color => (\r\n        <ColorButton\r\n          onSelected={() => {\r\n            onColorPicked(color);\r\n            onRequestClose();\r\n          }}\r\n          color={color}\r\n          key={color}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ColorButton = ({ color, onSelected }) => (\r\n  <div className={styles.colorButtonWrapper}>\r\n    <button\r\n      data-flume-component=\"color-button\"\r\n      className={styles.colorButton}\r\n      onClick={onSelected}\r\n      data-color={color}\r\n      aria-label={color}\r\n    />\r\n  </div>\r\n);\r\n","import React from \"react\";\r\nimport styles from \"./Comment.css\";\r\nimport Draggable from \"../Draggable/Draggable\";\r\nimport ContextMenu from \"../ContextMenu/ContextMenu\";\r\nimport ColorPicker from \"../ColorPicker/ColorPicker\";\r\nimport { StageContext } from \"../../context\";\r\nimport { Portal } from \"react-portal\";\r\nimport clamp from \"lodash/clamp\";\r\n\r\nexport default ({\r\n  dispatch,\r\n  id,\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  color,\r\n  text,\r\n  stageRect,\r\n  onDragStart,\r\n  isNew\r\n}) => {\r\n  const stageState = React.useContext(StageContext);\r\n  const wrapper = React.useRef();\r\n  const textarea = React.useRef();\r\n  const [isEditing, setIsEditing] = React.useState(false);\r\n  const [isPickingColor, setIsPickingColor] = React.useState(false);\r\n  const [menuOpen, setMenuOpen] = React.useState(false);\r\n  const [menuCoordinates, setMenuCoordinates] = React.useState({ x: 0, y: 0 });\r\n  const [colorPickerCoordinates, setColorPickerCoordinates] = React.useState({\r\n    x: 0,\r\n    y: 0\r\n  });\r\n\r\n  const handleContextMenu = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setMenuCoordinates({ x: e.clientX, y: e.clientY });\r\n    setMenuOpen(true);\r\n    return false;\r\n  };\r\n\r\n  const closeContextMenu = () => setMenuOpen(false);\r\n\r\n  const startDrag = e => {\r\n    onDragStart();\r\n  };\r\n\r\n  const handleDrag = ({ x, y }) => {\r\n    wrapper.current.style.transform = `translate(${x}px,${y}px)`;\r\n  };\r\n\r\n  const handleDragEnd = (_, { x, y }) => {\r\n    dispatch({\r\n      type: \"SET_COMMENT_COORDINATES\",\r\n      id,\r\n      x,\r\n      y\r\n    });\r\n  };\r\n\r\n  const handleResize = coordinates => {\r\n    const width = clamp(coordinates.x - x + 10, 80, 10000);\r\n    const height = clamp(coordinates.y - y + 10, 30, 10000);\r\n    wrapper.current.style.width = `${width}px`;\r\n    wrapper.current.style.height = `${height}px`;\r\n  };\r\n\r\n  const handleResizeEnd = (_, coordinates) => {\r\n    const width = clamp(coordinates.x - x + 10, 80, 10000);\r\n    const height = clamp(coordinates.y - y + 10, 30, 10000);\r\n    dispatch({\r\n      type: \"SET_COMMENT_DIMENSIONS\",\r\n      id,\r\n      width,\r\n      height\r\n    });\r\n  };\r\n\r\n  const handleMenuOption = (option, e) => {\r\n    switch (option.value) {\r\n      case \"edit\":\r\n        startTextEdit();\r\n        break;\r\n      case \"color\":\r\n        setColorPickerCoordinates(menuCoordinates);\r\n        setIsPickingColor(true);\r\n        break;\r\n      case \"delete\":\r\n        dispatch({\r\n          type: \"DELETE_COMMENT\",\r\n          id\r\n        });\r\n        break;\r\n      default:\r\n    }\r\n  };\r\n\r\n  const startTextEdit = () => {\r\n    setIsEditing(true);\r\n  };\r\n\r\n  const endTextEdit = () => {\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleTextChange = e => {\r\n    dispatch({\r\n      type: \"SET_COMMENT_TEXT\",\r\n      id,\r\n      text: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleColorPicked = color => {\r\n    dispatch({\r\n      type: \"SET_COMMENT_COLOR\",\r\n      id,\r\n      color\r\n    });\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (isNew) {\r\n      setIsEditing(true);\r\n      dispatch({\r\n        type: \"REMOVE_COMMENT_NEW\",\r\n        id\r\n      });\r\n    }\r\n  }, [isNew, dispatch, id]);\r\n\r\n  return (\r\n    <Draggable\r\n      innerRef={wrapper}\r\n      className={styles.wrapper}\r\n      style={{\r\n        transform: `translate(${x}px,${y}px)`,\r\n        width,\r\n        height,\r\n        zIndex: isEditing ? 999 : \"\"\r\n      }}\r\n      stageState={stageState}\r\n      stageRect={stageRect}\r\n      onDragStart={startDrag}\r\n      onDrag={handleDrag}\r\n      onDragEnd={handleDragEnd}\r\n      onContextMenu={handleContextMenu}\r\n      onDoubleClick={startTextEdit}\r\n      onWheel={e => e.stopPropagation()}\r\n      data-color={color}\r\n      data-flume-component=\"comment\"\r\n    >\r\n      {isEditing ? (\r\n        <textarea\r\n          data-flume-component=\"comment-textarea\"\r\n          className={styles.textarea}\r\n          onChange={handleTextChange}\r\n          onMouseDown={e => e.stopPropagation()}\r\n          onBlur={endTextEdit}\r\n          placeholder=\"Text of the comment...\"\r\n          autoFocus\r\n          value={text}\r\n          ref={textarea}\r\n        />\r\n      ) : (\r\n        <div data-flume-component=\"comment-text\" data-comment={true} className={styles.text}>\r\n          {text}\r\n        </div>\r\n      )}\r\n      <Draggable\r\n        className={styles.resizeThumb}\r\n        stageState={stageState}\r\n        stageRect={stageRect}\r\n        onDrag={handleResize}\r\n        onDragEnd={handleResizeEnd}\r\n        data-flume-component=\"comment-resize-handle\"\r\n      />\r\n      {menuOpen ? (\r\n        <Portal>\r\n          <ContextMenu\r\n            hideFilter\r\n            label=\"Comment Options\"\r\n            x={menuCoordinates.x}\r\n            y={menuCoordinates.y}\r\n            options={[\r\n              {\r\n                value: \"edit\",\r\n                label: \"Edit Comment\",\r\n                description: \"Edit the text of the comment\"\r\n              },\r\n              {\r\n                value: \"color\",\r\n                label: \"Change Color\",\r\n                description: \"Change the color of the comment\"\r\n              },\r\n              {\r\n                value: \"delete\",\r\n                label: \"Delete Comment\",\r\n                description: \"Delete the comment\"\r\n              }\r\n            ]}\r\n            onRequestClose={closeContextMenu}\r\n            onOptionSelected={handleMenuOption}\r\n          />\r\n        </Portal>\r\n      ) : null}\r\n      {isPickingColor ? (\r\n        <Portal>\r\n          <ColorPicker\r\n            x={colorPickerCoordinates.x}\r\n            y={colorPickerCoordinates.y}\r\n            onRequestClose={() => setIsPickingColor(false)}\r\n            onColorPicked={handleColorPicked}\r\n          />\r\n        </Portal>\r\n      ) : null}\r\n    </Draggable>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./Toaster.css\";\r\n\r\nexport default ({ toasts = [], dispatchToasts }) => {\r\n  const setHeight = React.useCallback(\r\n    (id, height) => {\r\n      dispatchToasts({\r\n        type: \"SET_HEIGHT\",\r\n        id,\r\n        height\r\n      });\r\n    },\r\n    [dispatchToasts]\r\n  );\r\n\r\n  const startExit = React.useCallback(\r\n    id => {\r\n      dispatchToasts({\r\n        type: \"SET_EXITING\",\r\n        id\r\n      });\r\n    },\r\n    [dispatchToasts]\r\n  );\r\n\r\n  const removeToast = React.useCallback(\r\n    id => {\r\n      dispatchToasts({\r\n        type: \"REMOVE_TOAST\",\r\n        id\r\n      });\r\n    },\r\n    [dispatchToasts]\r\n  );\r\n\r\n  return (\r\n    <div className={styles.toaster}>\r\n      {toasts.map((toast, i) => {\r\n        return (\r\n          <Toast\r\n            {...toast}\r\n            onHeightReceived={setHeight}\r\n            onExitRequested={startExit}\r\n            onRemoveRequested={removeToast}\r\n            y={toasts.slice(0, i + 1).reduce((y, t) => t.height + y + 5, 0)}\r\n            key={toast.id}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Toast = ({\r\n  id,\r\n  title,\r\n  message,\r\n  duration,\r\n  type,\r\n  exiting,\r\n  y,\r\n  onHeightReceived,\r\n  onExitRequested,\r\n  onRemoveRequested\r\n}) => {\r\n  const [paused, setPaused] = React.useState(false);\r\n  const wrapper = React.useRef();\r\n  const timer = React.useRef();\r\n\r\n  const stopTimer = React.useCallback(() => {\r\n    setPaused(true);\r\n    clearTimeout(timer.current);\r\n  }, []);\r\n\r\n  const resumeTimer = React.useCallback(() => {\r\n    setPaused(false);\r\n    timer.current = setTimeout(() => onExitRequested(id), duration);\r\n  }, [id, duration, onExitRequested]);\r\n\r\n  React.useLayoutEffect(() => {\r\n    const { height } = wrapper.current.getBoundingClientRect();\r\n    onHeightReceived(id, height);\r\n  }, [onHeightReceived, id]);\r\n\r\n  React.useEffect(() => {\r\n    resumeTimer();\r\n    return stopTimer;\r\n  }, [resumeTimer, stopTimer]);\r\n\r\n  const handleAnimationEnd = () => {\r\n    if (exiting) {\r\n      onRemoveRequested(id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      data-flume-component=\"toast\"\r\n      ref={wrapper}\r\n      className={styles.toast}\r\n      data-type={type}\r\n      style={{ transform: `translateY(-${y}px)` }}\r\n      data-exiting={exiting}\r\n      onAnimationEnd={handleAnimationEnd}\r\n      onMouseEnter={stopTimer}\r\n      onMouseLeave={resumeTimer}\r\n      role=\"alert\"\r\n    >\r\n      {\r\n        title ? <span data-flume-component=\"toast-title\" className={styles.title}>{title}</span> : null\r\n      }\r\n      <p data-flume-component=\"toast-message\">{message}</p>\r\n      {!paused && (\r\n        <div\r\n          className={styles.timer}\r\n          style={{ animationDuration: `${duration}ms` }}\r\n          onAnimationEnd={e => e.stopPropagation()}\r\n        />\r\n      )}\r\n      <button data-flume-component=\"toast-close\" className={styles.exitButton} onClick={() => {\r\n        stopTimer()\r\n        onExitRequested(id)\r\n      }}>✕</button>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react'\r\nimport { CONNECTIONS_ID } from '../../constants'\r\nimport styles from './Connections.css'\r\n\r\nconst Connections = ({ nodes, editorId }) => {\r\n\r\n  return (\r\n    <div className={styles.svgWrapper} id={`${CONNECTIONS_ID}${editorId}`}/>\r\n  )\r\n}\r\n\r\nexport default Connections\r\n","export const checkForCircularNodes = (nodes, startNodeId) => {\r\n  let isCircular = false;\r\n  const walk = nodeId => {\r\n    const outputs = Object.values(nodes[nodeId].connections.outputs);\r\n    for (var i = 0; i < outputs.length; i++) {\r\n      if(isCircular){\r\n        break;\r\n      }\r\n      const outputConnections = outputs[i];\r\n      for (var k = 0; k < outputConnections.length; k++) {\r\n        const connectedTo = outputConnections[k]\r\n        if(connectedTo.nodeId === startNodeId){\r\n          isCircular = true;\r\n          break;\r\n        }else{\r\n          walk(connectedTo.nodeId)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  walk(startNodeId)\r\n  return isCircular;\r\n}\r\n","import {\r\n  deleteConnection,\r\n  deleteConnectionsByNodeId\r\n} from \"./connectionCalculator\";\r\nimport { checkForCircularNodes } from \"./utilities\";\r\nimport {nanoid} from \"nanoid/non-secure/index\";\r\n\r\nconst addConnection = (nodes, input, output, portTypes) => {\r\n  const newNodes = {\r\n    ...nodes,\r\n    [input.nodeId]: {\r\n      ...nodes[input.nodeId],\r\n      connections: {\r\n        ...nodes[input.nodeId].connections,\r\n        inputs: {\r\n          ...nodes[input.nodeId].connections.inputs,\r\n          [input.portName]: [\r\n            ...(nodes[input.nodeId].connections.inputs[input.portName] || []),\r\n            {\r\n              nodeId: output.nodeId,\r\n              portName: output.portName\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    [output.nodeId]: {\r\n      ...nodes[output.nodeId],\r\n      connections: {\r\n        ...nodes[output.nodeId].connections,\r\n        outputs: {\r\n          ...nodes[output.nodeId].connections.outputs,\r\n          [output.portName]: [\r\n            ...(nodes[output.nodeId].connections.outputs[output.portName] ||\r\n              []),\r\n            {\r\n              nodeId: input.nodeId,\r\n              portName: input.portName\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  };\r\n  return newNodes;\r\n};\r\n\r\nconst removeConnection = (nodes, input, output) => {\r\n  const inputNode = nodes[input.nodeId];\r\n  const {\r\n    [input.portName]: removedInputPort,\r\n    ...newInputNodeConnectionsInputs\r\n  } = inputNode.connections.inputs;\r\n  const newInputNode = {\r\n    ...inputNode,\r\n    connections: {\r\n      ...inputNode.connections,\r\n      inputs: newInputNodeConnectionsInputs\r\n    }\r\n  };\r\n\r\n  const outputNode = nodes[output.nodeId];\r\n  const filteredOutputNodes = outputNode.connections.outputs[\r\n    output.portName\r\n  ].filter(cnx => {\r\n    return cnx.nodeId === input.nodeId ? cnx.portName !== input.portName : true;\r\n  });\r\n  const newOutputNode = {\r\n    ...outputNode,\r\n    connections: {\r\n      ...outputNode.connections,\r\n      outputs: {\r\n        ...outputNode.connections.outputs,\r\n        [output.portName]: filteredOutputNodes\r\n      }\r\n    }\r\n  };\r\n\r\n  return {\r\n    ...nodes,\r\n    [input.nodeId]: newInputNode,\r\n    [output.nodeId]: newOutputNode\r\n  };\r\n};\r\n\r\nconst getFilteredTransputs = (transputs, nodeId) =>\r\n  Object.entries(transputs).reduce((obj, [portName, transput]) => {\r\n    const newTransputs = transput.filter(t => t.nodeId !== nodeId);\r\n    if (newTransputs.length) {\r\n      obj[portName] = newTransputs;\r\n    }\r\n    return obj;\r\n  }, {});\r\n\r\nconst removeConnections = (connections, nodeId) => ({\r\n  inputs: getFilteredTransputs(connections.inputs, nodeId),\r\n  outputs: getFilteredTransputs(connections.outputs, nodeId)\r\n});\r\n\r\nconst removeNode = (startNodes, nodeId) => {\r\n  let { [nodeId]: deletedNode, ...nodes } = startNodes;\r\n  nodes = Object.values(nodes).reduce((obj, node) => {\r\n    obj[node.id] = {\r\n      ...node,\r\n      connections: removeConnections(node.connections, nodeId)\r\n    };\r\n\r\n    return obj;\r\n  }, {});\r\n  deleteConnectionsByNodeId(nodeId);\r\n  return nodes;\r\n};\r\n\r\nconst reconcileNodes = (initialNodes, nodeTypes, portTypes, context) => {\r\n  let nodes = { ...initialNodes };\r\n\r\n  // Delete extraneous nodes\r\n  let nodesToDelete = Object.values(nodes)\r\n    .map(node => (!nodeTypes[node.type] ? node.id : undefined))\r\n    .filter(x => x);\r\n\r\n  nodesToDelete.forEach(nodeId => {\r\n    nodes = nodesReducer(\r\n      nodes,\r\n      {\r\n        type: \"REMOVE_NODE\",\r\n        nodeId\r\n      },\r\n      { nodeTypes, portTypes, context }\r\n    );\r\n  });\r\n\r\n  // Reconcile input data for each node\r\n  let reconciledNodes = Object.values(nodes).reduce((nodesObj, node) => {\r\n    const nodeType = nodeTypes[node.type];\r\n    const defaultInputData = getDefaultData({ node, nodeType, portTypes, context });\r\n    const currentInputData = Object.entries(node.inputData).reduce(\r\n      (dataObj, [key, data]) => {\r\n        if (defaultInputData[key] !== undefined) {\r\n          dataObj[key] = data;\r\n        }\r\n        return dataObj;\r\n      },\r\n      {}\r\n    );\r\n    const newInputData = {\r\n      ...defaultInputData,\r\n      ...currentInputData\r\n    };\r\n    nodesObj[node.id] = {\r\n      ...node,\r\n      inputData: newInputData\r\n    };\r\n    return nodesObj;\r\n  }, {});\r\n\r\n  // Reconcile node attributes for each node\r\n  reconciledNodes = Object.values(reconciledNodes).reduce((nodesObj, node) => {\r\n    let newNode = { ...node };\r\n    const nodeType = nodeTypes[node.type];\r\n    if (nodeType.root !== node.root) {\r\n      if (nodeType.root && !node.root) {\r\n        newNode.root = nodeType.root;\r\n      } else if (!nodeType.root && node.root) {\r\n        delete newNode.root;\r\n      }\r\n    }\r\n    nodesObj[node.id] = newNode;\r\n    return nodesObj;\r\n  }, {});\r\n\r\n  return reconciledNodes;\r\n};\r\n\r\nexport const getInitialNodes = (\r\n  initialNodes = {},\r\n  defaultNodes = [],\r\n  nodeTypes,\r\n  portTypes,\r\n  context\r\n) => {\r\n  const reconciledNodes = reconcileNodes(initialNodes, nodeTypes, portTypes, context);\r\n\r\n  return {\r\n    ...reconciledNodes,\r\n    ...defaultNodes.reduce((nodes, dNode, i) => {\r\n      const nodeNotAdded = !Object.values(initialNodes).find(\r\n        n => n.type === dNode.type\r\n      );\r\n      if (nodeNotAdded) {\r\n        nodes = nodesReducer(\r\n          nodes,\r\n          {\r\n            type: \"ADD_NODE\",\r\n            id: `default-${i}`,\r\n            defaultNode: true,\r\n            x: dNode.x || 0,\r\n            y: dNode.y || 0,\r\n            nodeType: dNode.type\r\n          },\r\n          { nodeTypes, portTypes, context }\r\n        );\r\n      }\r\n      return nodes;\r\n    }, {})\r\n  };\r\n};\r\n\r\nconst getDefaultData = ({ node, nodeType, portTypes, context }) => {\r\n  const inputs = Array.isArray(nodeType.inputs)\r\n    ? nodeType.inputs\r\n    : nodeType.inputs(node.inputData, node.connections, context);\r\n  return inputs.reduce((obj, input) => {\r\n    const inputType = portTypes[input.type];\r\n    obj[input.name || inputType.name] = (\r\n      input.controls ||\r\n      inputType.controls ||\r\n      []\r\n    ).reduce((obj2, control) => {\r\n      obj2[control.name] = control.defaultValue;\r\n      return obj2;\r\n    }, {});\r\n    return obj;\r\n  }, {});\r\n};\r\n\r\nconst nodesReducer = (\r\n  nodes,\r\n  action = {},\r\n  { nodeTypes, portTypes, cache, circularBehavior, context },\r\n  dispatchToasts\r\n) => {\r\n  switch (action.type) {\r\n    case \"ADD_CONNECTION\": {\r\n      const { input, output } = action;\r\n      const inputIsNotConnected = !nodes[input.nodeId].connections.inputs[\r\n        input.portName\r\n      ];\r\n      if (inputIsNotConnected) {\r\n        const allowCircular = circularBehavior === \"warn\" || circularBehavior === \"allow\"\r\n        const newNodes = addConnection(nodes, input, output, portTypes);\r\n        const isCircular = checkForCircularNodes(newNodes, output.nodeId);\r\n        if (isCircular && !allowCircular) {\r\n          dispatchToasts({\r\n            type: \"ADD_TOAST\",\r\n            title: \"Unable to connect\",\r\n            message: \"Connecting these nodes would result in an infinite loop.\",\r\n            toastType: \"warning\",\r\n            duration: 5000\r\n          });\r\n          return nodes;\r\n        } else {\r\n          if(isCircular && circularBehavior === \"warn\"){\r\n            dispatchToasts({\r\n              type: \"ADD_TOAST\",\r\n              title: \"Circular Connection Detected\",\r\n              message: \"Connecting these nodes has created an infinite loop.\",\r\n              toastType: \"warning\",\r\n              duration: 5000\r\n            });\r\n          }\r\n          return newNodes;\r\n        }\r\n      } else return nodes;\r\n    }\r\n\r\n    case \"REMOVE_CONNECTION\": {\r\n      const { input, output } = action;\r\n      const id =\r\n        output.nodeId + output.portName + input.nodeId + input.portName;\r\n      delete cache.current.connections[id];\r\n      deleteConnection({ id });\r\n      return removeConnection(nodes, input, output);\r\n    }\r\n\r\n    case \"DESTROY_TRANSPUT\": {\r\n      const { transput, transputType } = action;\r\n      const portId = transput.nodeId + transput.portName + transputType;\r\n      delete cache.current.ports[portId];\r\n\r\n      const cnxType = transputType === 'input' ? 'inputs' : 'outputs';\r\n      const connections = nodes[transput.nodeId].connections[cnxType][transput.portName];\r\n      if (!connections || !connections.length) return nodes;\r\n\r\n      return connections.reduce((nodes, cnx) => {\r\n        const [input, output] = transputType === 'input' ? [transput, cnx] : [cnx, transput];\r\n        const id = output.nodeId + output.portName + input.nodeId + input.portName;\r\n        delete cache.current.connections[id];\r\n        deleteConnection({ id });\r\n        return removeConnection(nodes, input, output);\r\n      }, nodes);\r\n    }\r\n\r\n    case \"ADD_NODE\": {\r\n      const { x, y, nodeType, id, defaultNode } = action;\r\n      const newNodeId = id || nanoid(10);\r\n      const newNode = {\r\n        id: newNodeId,\r\n        x,\r\n        y,\r\n        type: nodeType,\r\n        width: nodeTypes[nodeType].initialWidth || 200,\r\n        connections: {\r\n          inputs: {},\r\n          outputs: {}\r\n        },\r\n        inputData: {}\r\n      };\r\n      newNode.inputData = getDefaultData({\r\n        node: newNode,\r\n        nodeType: nodeTypes[nodeType],\r\n        portTypes,\r\n        context\r\n      });\r\n      if (defaultNode) {\r\n        newNode.defaultNode = true;\r\n      }\r\n      if (nodeTypes[nodeType].root) {\r\n        newNode.root = true;\r\n      }\r\n      return {\r\n        ...nodes,\r\n        [newNodeId]: newNode\r\n      };\r\n    }\r\n\r\n    case \"REMOVE_NODE\": {\r\n      const { nodeId } = action;\r\n      return removeNode(nodes, nodeId);\r\n    }\r\n\r\n    case \"HYDRATE_DEFAULT_NODES\": {\r\n      const newNodes = { ...nodes };\r\n      for (const key in newNodes) {\r\n        if (newNodes[key].defaultNode) {\r\n          const newNodeId = nanoid(10);\r\n          const { id, defaultNode, ...node } = newNodes[key];\r\n          newNodes[newNodeId] = {...node, id: newNodeId };\r\n          delete newNodes[key];\r\n        }\r\n      }\r\n      return newNodes;\r\n    }\r\n\r\n    case \"SET_PORT_DATA\": {\r\n      const { nodeId, portName, controlName, data, setValue } = action;\r\n      let newData = {\r\n        ...nodes[nodeId].inputData,\r\n        [portName]: {\r\n          ...nodes[nodeId].inputData[portName],\r\n          [controlName]: data\r\n        }\r\n      };\r\n      if (setValue) {\r\n        newData = setValue(newData, nodes[nodeId].inputData);\r\n      }\r\n      return {\r\n        ...nodes,\r\n        [nodeId]: {\r\n          ...nodes[nodeId],\r\n          inputData: newData\r\n        }\r\n      };\r\n    }\r\n\r\n    case \"SET_NODE_COORDINATES\": {\r\n      const { x, y, nodeId } = action;\r\n      return {\r\n        ...nodes,\r\n        [nodeId]: {\r\n          ...nodes[nodeId],\r\n          x,\r\n          y\r\n        }\r\n      };\r\n    }\r\n\r\n    default:\r\n      return nodes;\r\n  }\r\n};\r\n\r\nexport const connectNodesReducer = (reducer, environment, dispatchToasts) => (\r\n  state,\r\n  action\r\n) => reducer(state, action, environment, dispatchToasts);\r\n\r\nexport default nodesReducer;\r\n","import { nanoid }from \"nanoid/non-secure/index\";\r\n\r\nconst setComment = (comments, id, merge) => ({\r\n  ...comments,\r\n  [id]: {\r\n    ...comments[id],\r\n    ...merge\r\n  }\r\n});\r\n\r\nexport default (comments = {}, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_COMMENT\": {\r\n      const comment = {\r\n        id: nanoid(10),\r\n        text: \"\",\r\n        x: action.x,\r\n        y: action.y,\r\n        width: 200,\r\n        height: 30,\r\n        color: \"blue\",\r\n        isNew: true\r\n      };\r\n      return {\r\n        ...comments,\r\n        [comment.id]: comment\r\n      };\r\n    }\r\n    case \"REMOVE_COMMENT_NEW\":\r\n      const { isNew: toDelete, ...comment } = comments[action.id];\r\n      return {\r\n        ...comments,\r\n        [action.id]: comment\r\n      };\r\n    case \"SET_COMMENT_COORDINATES\": {\r\n      return setComment(comments, action.id, { x: action.x, y: action.y });\r\n    }\r\n    case \"SET_COMMENT_DIMENSIONS\": {\r\n      return setComment(comments, action.id, {\r\n        width: action.width,\r\n        height: action.height\r\n      });\r\n    }\r\n    case \"SET_COMMENT_TEXT\": {\r\n      return setComment(comments, action.id, { text: action.text });\r\n    }\r\n    case \"SET_COMMENT_COLOR\": {\r\n      return setComment(comments, action.id, { color: action.color });\r\n    }\r\n    case \"DELETE_COMMENT\": {\r\n      const { [action.id]: toDelete, ...newComments } = comments;\r\n      return newComments;\r\n    }\r\n    default:\r\n      return comments;\r\n  }\r\n};\r\n","import { nanoid }from \"nanoid/non-secure/index\";\r\n\r\nexport default (toasts = [], action) => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return [\r\n        {\r\n          id: nanoid(5),\r\n          title: action.title,\r\n          message: action.message,\r\n          type: action.toastType || 'info',\r\n          duration: action.duration || 10000,\r\n          height: 0,\r\n          exiting: false\r\n        },\r\n        ...toasts\r\n      ];\r\n    case \"SET_HEIGHT\": {\r\n      const index = toasts.findIndex(t => t.id === action.id);\r\n      return [\r\n        ...toasts.slice(0, index),\r\n        {\r\n          ...toasts[index],\r\n          height: action.height\r\n        },\r\n        ...toasts.slice(index + 1)\r\n      ];\r\n    }\r\n    case \"SET_EXITING\": {\r\n      const index = toasts.findIndex(t => t.id === action.id);\r\n      return [\r\n        ...toasts.slice(0, index),\r\n        {\r\n          ...toasts[index],\r\n          exiting: true\r\n        },\r\n        ...toasts.slice(index + 1)\r\n      ];\r\n    }\r\n    case \"REMOVE_TOAST\": {\r\n      const index = toasts.findIndex(t => t.id === action.id);\r\n      return [\r\n        ...toasts.slice(0, index),\r\n        ...toasts.slice(index + 1)\r\n      ];\r\n    }\r\n    default:\r\n      return toasts;\r\n  }\r\n};\r\n","export default (state, incomingAction) => {\r\n  let action = typeof incomingAction === 'function' ? incomingAction(state) : incomingAction;\r\n  switch (action.type) {\r\n    case 'SET_SCALE':\r\n      return { ...state, scale: action.scale }\r\n    case 'SET_TRANSLATE':\r\n      return { ...state, translate: action.translate }\r\n    case 'SET_TRANSLATE_SCALE':\r\n      return { ...state, translate: action.translate, scale: action.scale }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","class Cache{\r\n  constructor(){\r\n    this.ports = {};\r\n    this.connections = {};\r\n  }\r\n}\r\nexport default Cache\r\n","class LoopError extends Error {\r\n  constructor(message, code) {\r\n    super(message);\r\n    this.code = code;\r\n  }\r\n  static maxLoopsExceeded = 1;\r\n}\r\n\r\nexport class RootEngine {\r\n  constructor(config, resolveInputControls, fireNodeFunction) {\r\n    this.config = config;\r\n    this.fireNodeFunction = fireNodeFunction;\r\n    this.resolveInputControls = resolveInputControls;\r\n    this.loops = 0;\r\n    this.maxLoops = 1000;\r\n  }\r\n  resetLoops = maxLoops => {\r\n    this.maxLoops = maxLoops !== undefined ? maxLoops : 1000;\r\n    this.loops = 0;\r\n  };\r\n  checkLoops = () => {\r\n    if (this.maxLoops >= 0 && this.loops > this.maxLoops) {\r\n      throw new LoopError(\r\n        \"Max loop count exceeded.\",\r\n        LoopError.maxLoopsExceeded\r\n      );\r\n    } else {\r\n      this.loops++;\r\n    }\r\n  };\r\n  getRootNode = nodes => {\r\n    const roots = Object.values(nodes).filter(n => n.root);\r\n    if (roots.length > 1) {\r\n      throw new Error(\r\n        \"The root engine must not be called with more than one root node.\"\r\n      );\r\n    }\r\n    return roots[0];\r\n  };\r\n  reduceRootInputs = (inputs, callback) =>\r\n    Object.entries(inputs).reduce((obj, [inputName, connection]) => {\r\n      const input = callback(inputName, connection);\r\n      obj[input.name] = input.value;\r\n      return obj;\r\n    }, {});\r\n  resolveInputValues = (node, nodeType, nodes, context) => {\r\n    let inputs = nodeType.inputs\r\n    if (typeof inputs === 'function') {\r\n      inputs = inputs(node.inputData, node.connections, context)\r\n    }\r\n    return inputs.reduce((obj, input) => {\r\n      const inputConnections = node.connections.inputs[input.name] || [];\r\n      if (inputConnections.length > 0) {\r\n        obj[input.name] = this.getValueOfConnection(\r\n          inputConnections[0],\r\n          nodes,\r\n          context\r\n        );\r\n      } else {\r\n        obj[input.name] = this.resolveInputControls(\r\n          input.type,\r\n          node.inputData[input.name] || {},\r\n          context\r\n        );\r\n      }\r\n      return obj;\r\n    }, {});\r\n  };\r\n  getValueOfConnection = (connection, nodes, context) => {\r\n    this.checkLoops();\r\n    const outputNode = nodes[connection.nodeId];\r\n    const outputNodeType = this.config.nodeTypes[outputNode.type];\r\n    const inputValues = this.resolveInputValues(\r\n      outputNode,\r\n      outputNodeType,\r\n      nodes,\r\n      context\r\n    );\r\n    const outputResult = this.fireNodeFunction(\r\n      outputNode,\r\n      inputValues,\r\n      outputNodeType,\r\n      context\r\n    )[connection.portName];\r\n    return outputResult;\r\n  };\r\n  resolveRootNode(nodes, options = {}) {\r\n    const rootNode = options.rootNodeId\r\n      ? nodes[options.rootNodeId]\r\n      : this.getRootNode(nodes);\r\n    if (rootNode) {\r\n      let inputs = this.config.nodeTypes[rootNode.type].inputs;\r\n      if (typeof inputs === 'function') {\r\n        inputs = inputs(rootNode.inputData, rootNode.connections, options.context);\r\n      }\r\n      const controlValues = inputs.reduce(\r\n        (obj, input) => {\r\n          obj[input.name] = this.resolveInputControls(\r\n            input.type,\r\n            rootNode.inputData[input.name] || {},\r\n            options.context\r\n          );\r\n          return obj;\r\n        },\r\n        {}\r\n      );\r\n      const inputValues = this.reduceRootInputs(\r\n        rootNode.connections.inputs,\r\n        (inputName, connection) => {\r\n          this.resetLoops(options.maxLoops);\r\n          let value;\r\n          try {\r\n            value = this.getValueOfConnection(\r\n              connection[0],\r\n              nodes,\r\n              options.context\r\n            );\r\n          } catch (e) {\r\n            if (e.code === LoopError.maxLoopsExceeded) {\r\n              console.error(`${e.message} Circular nodes detected in ${inputName} port.`);\r\n            } else {\r\n              console.error(e)\r\n            }\r\n          } finally {\r\n            return {\r\n              name: inputName,\r\n              value\r\n            };\r\n          }\r\n        }\r\n      );\r\n      if (options.onlyResolveConnected) {\r\n        return inputValues;\r\n      } else {\r\n        return { ...controlValues, ...inputValues };\r\n      }\r\n    } else {\r\n      console.error(\r\n        \"A root node was not found. The Root Engine requires that exactly one node be marked as the root node.\"\r\n      );\r\n      return {};\r\n    }\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { useId } from \"@reach/auto-id\";\r\nimport Stage from \"./components/Stage/Stage\";\r\nimport Node from \"./components/Node/Node\";\r\nimport Comment from \"./components/Comment/Comment\";\r\nimport Toaster from \"./components/Toaster/Toaster\";\r\nimport Connections from \"./components/Connections/Connections\";\r\nimport {\r\n  NodeTypesContext,\r\n  PortTypesContext,\r\n  NodeDispatchContext,\r\n  ConnectionRecalculateContext,\r\n  RecalculateStageRectContext,\r\n  ContextContext,\r\n  StageContext,\r\n  CacheContext,\r\n  EditorIdContext\r\n} from \"./context\";\r\nimport { createConnections } from \"./connectionCalculator\";\r\nimport nodesReducer, {\r\n  connectNodesReducer,\r\n  getInitialNodes\r\n} from \"./nodesReducer\";\r\nimport commentsReducer from \"./commentsReducer\";\r\nimport toastsReducer from \"./toastsReducer\";\r\nimport stageReducer from \"./stageReducer\";\r\nimport usePrevious from \"./hooks/usePrevious\";\r\nimport clamp from \"lodash/clamp\";\r\nimport Cache from \"./Cache\";\r\nimport { STAGE_ID, DRAG_CONNECTION_ID } from \"./constants\";\r\nimport styles from \"./styles.css\";\r\n\r\nconst defaultContext = {};\r\n\r\nexport let NodeEditor = (\r\n  {\r\n    comments: initialComments,\r\n    nodes: initialNodes,\r\n    nodeTypes = {},\r\n    portTypes = {},\r\n    defaultNodes = [],\r\n    context = defaultContext,\r\n    onChange,\r\n    onCommentsChange,\r\n    initialScale,\r\n    spaceToPan = false,\r\n    hideComments = false,\r\n    disableComments = false,\r\n    disableZoom = false,\r\n    disablePan = false,\r\n    circularBehavior,\r\n    renderNodeHeader,\r\n    debug,\r\n    disableInputs = false\r\n  },\r\n  ref\r\n) => {\r\n  const editorId = useId();\r\n  const cache = React.useRef(new Cache());\r\n  const stage = React.useRef();\r\n  const [sideEffectToasts, setSideEffectToasts] = React.useState()\r\n  const [toasts, dispatchToasts] = React.useReducer(toastsReducer, []);\r\n  const [nodes, dispatchNodes] = React.useReducer(\r\n    connectNodesReducer(\r\n      nodesReducer,\r\n      { nodeTypes, portTypes, cache, circularBehavior, context },\r\n      setSideEffectToasts\r\n    ),\r\n    {},\r\n    () => getInitialNodes(initialNodes, defaultNodes, nodeTypes, portTypes, context)\r\n  );\r\n  const [comments, dispatchComments] = React.useReducer(\r\n    commentsReducer,\r\n    initialComments || {}\r\n  );\r\n  React.useEffect(() => {\r\n    dispatchNodes({ type: \"HYDRATE_DEFAULT_NODES\" });\r\n  }, []);\r\n  const [\r\n    shouldRecalculateConnections,\r\n    setShouldRecalculateConnections\r\n  ] = React.useState(true);\r\n  const [stageState, dispatchStageState] = React.useReducer(stageReducer, {\r\n    scale: typeof initialScale === \"number\" ? clamp(initialScale, 0.1, 7) : 1,\r\n    translate: { x: 0, y: 0 }\r\n  });\r\n\r\n  const recalculateConnections = React.useCallback(() => {\r\n    createConnections(nodes, stageState, editorId);\r\n  }, [nodes, editorId, stageState]);\r\n\r\n  const recalculateStageRect = () => {\r\n    stage.current = document\r\n      .getElementById(`${STAGE_ID}${editorId}`)\r\n      .getBoundingClientRect();\r\n  };\r\n\r\n  React.useLayoutEffect(() => {\r\n    if (shouldRecalculateConnections) {\r\n      recalculateConnections();\r\n      setShouldRecalculateConnections(false);\r\n    }\r\n  }, [shouldRecalculateConnections, recalculateConnections]);\r\n\r\n  const triggerRecalculation = () => {\r\n    setShouldRecalculateConnections(true);\r\n  };\r\n\r\n  React.useImperativeHandle(ref, () => ({\r\n    getNodes: () => {\r\n      return nodes;\r\n    },\r\n    getComments: () => {\r\n      return comments;\r\n    }\r\n  }));\r\n\r\n  const previousNodes = usePrevious(nodes);\r\n\r\n  React.useEffect(() => {\r\n    if (previousNodes && onChange && nodes !== previousNodes) {\r\n      onChange(nodes);\r\n    }\r\n  }, [nodes, previousNodes, onChange]);\r\n\r\n  const previousComments = usePrevious(comments);\r\n\r\n  React.useEffect(() => {\r\n    if (previousComments && onCommentsChange && comments !== previousComments) {\r\n      onCommentsChange(comments);\r\n    }\r\n  }, [comments, previousComments, onCommentsChange]);\r\n\r\n  React.useEffect(() => {\r\n    if (sideEffectToasts) {\r\n      dispatchToasts(sideEffectToasts)\r\n      setSideEffectToasts(null)\r\n    }\r\n  }, [sideEffectToasts])\r\n\r\n  return (\r\n    <PortTypesContext.Provider value={portTypes}>\r\n      <NodeTypesContext.Provider value={nodeTypes}>\r\n        <NodeDispatchContext.Provider value={dispatchNodes}>\r\n          <ConnectionRecalculateContext.Provider value={triggerRecalculation}>\r\n            <ContextContext.Provider value={context}>\r\n              <StageContext.Provider value={stageState}>\r\n                <CacheContext.Provider value={cache}>\r\n                  <EditorIdContext.Provider value={editorId}>\r\n                    <RecalculateStageRectContext.Provider\r\n                      value={recalculateStageRect}\r\n                    >\r\n                      <Stage\r\n                        editorId={editorId}\r\n                        scale={stageState.scale}\r\n                        translate={stageState.translate}\r\n                        spaceToPan={spaceToPan}\r\n                        disablePan={disablePan}\r\n                        disableZoom={disableZoom}\r\n                        dispatchStageState={dispatchStageState}\r\n                        dispatchComments={dispatchComments}\r\n                        disableComments={disableComments || hideComments}\r\n                        stageRef={stage}\r\n                        numNodes={Object.keys(nodes).length}\r\n                        outerStageChildren={\r\n                          <React.Fragment>\r\n                            {debug && (\r\n                              <div className={styles.debugWrapper}>\r\n                                <button\r\n                                  className={styles.debugButton}\r\n                                  onClick={() => console.log(nodes)}\r\n                                >\r\n                                  Log Nodes\r\n                                </button>\r\n                                <button\r\n                                  className={styles.debugButton}\r\n                                  onClick={() =>\r\n                                    console.log(JSON.stringify(nodes))\r\n                                  }\r\n                                >\r\n                                  Export Nodes\r\n                                </button>\r\n                                <button\r\n                                  className={styles.debugButton}\r\n                                  onClick={() => console.log(comments)}\r\n                                >\r\n                                  Log Comments\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                            <Toaster\r\n                              toasts={toasts}\r\n                              dispatchToasts={dispatchToasts}\r\n                            />\r\n                          </React.Fragment>\r\n                        }\r\n                      >\r\n                        {!hideComments &&\r\n                          Object.values(comments).map(comment => (\r\n                            <Comment\r\n                              {...comment}\r\n                              stageRect={stage}\r\n                              dispatch={dispatchComments}\r\n                              onDragStart={recalculateStageRect}\r\n                              key={comment.id}\r\n                            />\r\n                          ))}\r\n                        {Object.values(nodes).map(node => (\r\n                          <Node\r\n                            {...node}\r\n                            stageRect={stage}\r\n                            onDragEnd={triggerRecalculation}\r\n                            onDragStart={recalculateStageRect}\r\n                            renderNodeHeader={renderNodeHeader}\r\n                            key={node.id}\r\n                            disableInputs={disableInputs}\r\n                          />\r\n                        ))}\r\n                        <Connections nodes={nodes} editorId={editorId} />\r\n                        <div\r\n                          className={styles.dragWrapper}\r\n                          id={`${DRAG_CONNECTION_ID}${editorId}`}\r\n                        ></div>\r\n                      </Stage>\r\n                    </RecalculateStageRectContext.Provider>\r\n                  </EditorIdContext.Provider>\r\n                </CacheContext.Provider>\r\n              </StageContext.Provider>\r\n            </ContextContext.Provider>\r\n          </ConnectionRecalculateContext.Provider>\r\n        </NodeDispatchContext.Provider>\r\n      </NodeTypesContext.Provider>\r\n    </PortTypesContext.Provider>\r\n  );\r\n};\r\nNodeEditor = React.forwardRef(NodeEditor);\r\nexport { FlumeConfig, Controls, Colors } from \"./typeBuilders\";\r\nexport { RootEngine } from \"./RootEngine\";\r\nexport const useRootEngine = (nodes, engine, context, options = {}) =>\r\n  Object.keys(nodes).length ? engine.resolveRootNode(nodes, { ...options, context }) : {};\r\n"],"names":["canUseDOM","_createClass","_classCallCheck","_possibleConstructorReturn","_inherits","Portal","Portalv4","LegacyPortal","trimmedEndIndex","global","freeGlobal","Symbol","root","objectProto","nativeObjectToString","symToStringTag","getRawTag","objectToString","isObjectLike","baseGetTag","isSymbol","isObject","baseTrim","toNumber","baseClamp","ContextMenu","x","y","options","onRequestClose","onOptionSelected","label","hideHeader","hideFilter","emptyText","menuWrapper","React","useRef","menuOptionsWrapper","filterInput","useState","filter","setFilter","menuWidth","setMenuWidth","selectedIndex","setSelectedIndex","menuId","nanoid","handleOptionSelected","option","testClickOutside","useCallback","current","contains","e","target","removeEventListener","capture","testEscape","keyCode","useEffect","focus","getBoundingClientRect","width","addEventListener","filteredOptions","useMemo","lowerFilter","toLowerCase","opt","includes","handleFilterChange","value","handleKeyDown","which","preventDefault","i","length","menuOption","document","getElementById","menuRect","optionRect","height","scrollIntoView","block","styles","stopPropagation","menuHeader","menuLabel","menuFilter","optionsWrapper","maxHeight","clamp","window","innerHeight","map","description","ContextOption","index","children","onClick","selected","onMouseEnter","NodeTypesContext","createContext","PortTypesContext","NodeDispatchContext","ConnectionRecalculateContext","ContextContext","StageContext","CacheContext","RecalculateStageRectContext","EditorIdContext","stageState","stageRect","onDragDelayStart","onDragStart","onDrag","onDragEnd","onMouseDown","onTouchStart","disabled","delay","innerRef","rest","startCoordinates","offset","wrapper","byScale","scale","getScaledCoordinates","clientX","left","translate","clientY","top","updateCoordinates","coordinates","stopDrag","startDrag","nodeRect","checkDragDelay","touches","a","Math","abs","b","distance","round","sqrt","pow","dragDistance","endDragDelay","startDragDelay","ref","isArray","isFunction","coreJsData","funcProto","funcToString","hasOwnProperty","isMasked","toSource","getValue","baseIsNative","getNative","nativeCreate","HASH_UNDEFINED","hashClear","hashDelete","hashGet","hashHas","hashSet","eq","assocIndexOf","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","Hash","Map","ListCache","isKeyable","getMapData","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","memoize","memoizeCapped","arrayMap","baseToString","isKey","stringToPath","toString","INFINITY","castPath","toKey","stackClear","stackDelete","stackGet","stackHas","stackSet","setCacheAdd","setCacheHas","SetCache","arraySome","cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","symbolTag","symbolProto","Uint8Array","mapToArray","setToArray","equalArrays","arrayPush","stubArray","arrayFilter","propertyIsEnumerable","baseIsArguments","stubFalse","MAX_SAFE_INTEGER","argsTag","boolTag","dateTag","errorTag","funcTag","mapTag","numberTag","regexpTag","setTag","stringTag","arrayBufferTag","dataViewTag","isLength","nodeUtil","baseUnary","baseIsTypedArray","isArguments","isBuffer","isTypedArray","baseTimes","isIndex","overArg","isPrototype","nativeKeys","isArrayLike","arrayLikeKeys","baseKeys","baseGetAllKeys","keys","getSymbols","getAllKeys","Promise","objectTag","weakMapTag","DataView","Set","WeakMap","arrayTag","getTag","Stack","equalByTag","equalObjects","baseIsEqualDeep","baseIsEqual","isStrictComparable","getMatchData","matchesStrictComparable","baseIsMatch","get","baseGet","hasPath","baseHasIn","hasIn","baseProperty","basePropertyDeep","identity","baseMatchesProperty","baseMatches","property","createBaseFor","baseFor","createBaseEach","baseForOwn","baseEach","compareAscending","baseIteratee","baseMap","baseSortBy","compareMultiple","baseOrderBy","STAGE_ID","DRAG_CONNECTION_ID","CONNECTIONS_ID","Stage","editorId","dispatchStageState","outerStageChildren","numNodes","stageRef","spaceToPan","dispatchComments","disableComments","disablePan","disableZoom","nodeTypes","useContext","dispatchNodes","translateWrapper","menuOpen","setMenuOpen","menuCoordinates","setMenuCoordinates","dragData","spaceIsPressed","setSpaceIsPressed","setStageRect","handleWheel","nodeName","dataset","comment","clientHeight","scrollHeight","currentScale","currentTranslate","delta","deltaY","newScale","byOldScale","no","byNewScale","wrapperRect","xOld","yOld","xNew","yNew","xDistance","yDistance","handleDragDelayStart","handleDragStart","handleMouseDrag","coords","xDelta","yDelta","style","backgroundPosition","transform","handleDragEnd","tran","handleContextMenu","closeContextMenu","addNode","node","internalType","type","handleDocumentKeyUp","activeElement","handleMouseEnter","stageWrapper","menuOptions","orderBy","Object","values","addable","sortIndex","push","cursor","transformWrapper","scaleWrapper","pi","pointX","pointY","point","getPort","nodeId","portName","transputType","querySelector","getPortRect","cache","portCacheName","cachedPort","ports","port","calculateCurve","from","to","thirdLength","curve","line","curveBasis","deleteConnection","id","parentNode","remove","deleteConnectionsByNodeId","lines","querySelectorAll","updateConnection","setAttribute","createSVG","stage","outputNodeId","outputPortName","inputNodeId","inputPortName","svg","createElementNS","path","appendChild","getStageRef","createConnections","nodes","stageId","stageHalfWidth","stageHalfHeight","forEach","connections","inputs","entries","k","inputName","outputs","fromPort","output","toPort","portHalf","existingLine","Checkbox","data","onChange","checkbox","checked","TextInput","placeholder","updateNodeConnections","step","disableInputs","numberInput","recalculateStageRect","handleMouseMove","handlePossibleResize","inputValue","replace","parseFloat","Number","isNaN","input","MAX_LABEL_LENGTH","Select","allowMultiple","drawerOpen","setDrawerOpen","drawerCoordinates","setDrawerCoordinates","closeDrawer","openDrawer","handleOptionDeleted","slice","optionIndex","getFilteredOptions","selectedOption","find","o","chipsWrapper","val","optLabel","selectStyles","SelectedOption","wrapperRef","selectedWrapper","OptionChip","onRequestDelete","chipWrapper","deleteButton","Control","name","inputLabel","allData","render","inputData","triggerRecalculation","getOptions","setValue","defaultValue","isMonoControl","nodesDispatch","executionContext","calculatedLabel","getControlByType","commonProps","controlLabel","Connection","lineRef","usePrevious","useTransputs","transputsFn","transputs","Array","prevTransputs","transput","IoPorts","inputTypes","resolvedInputs","resolvedOutputs","Input","localControls","controls","noControls","isConnected","hidePort","defaultLabel","color","defaultControls","prevConnected","portLabel","control","Output","Port","isInput","isDragging","setIsDragging","dragStartCoordinates","setDragStartCoordinates","dragStartCoordinatesCache","lineInToPort","handleDrag","droppedOnPort","connectToPortName","connectToNodeId","connectToPortType","portType","connectToTransputType","portTransputType","isNotSameNode","inputWillAcceptConnection","acceptTypes","inputNodeType","inputTransputType","startPort","portIsConnected","zIndex","outputPort","Node","renderNodeHeader","currentNodeType","deletable","nodeWrapper","updateConnectionsByTransput","isOutput","toRect","fromRect","combined","cnx","cachedConnection","deleteNode","handleMenuOption","NodeHeader","className","props","define","undefined","buildControlType","defaultConfig","validate","setup","config","Controls","Colors","getPortBuilders","reduce","obj","FlumeConfig","portTypes","addNodeType","Error","initialWidth","error","deleted","grey","skipDynamicNodesCheck","dynamicNodes","warn","affectedNodes","p","n","join","onColorPicked","ColorButton","onSelected","colorButtonWrapper","colorButton","dispatch","text","isNew","textarea","isEditing","setIsEditing","isPickingColor","setIsPickingColor","colorPickerCoordinates","setColorPickerCoordinates","_","handleResize","handleResizeEnd","startTextEdit","endTextEdit","handleTextChange","handleColorPicked","resizeThumb","toasts","dispatchToasts","setHeight","startExit","removeToast","toaster","toast","t","Toast","title","message","duration","exiting","onHeightReceived","onExitRequested","onRemoveRequested","paused","setPaused","timer","stopTimer","resumeTimer","setTimeout","useLayoutEffect","handleAnimationEnd","animationDuration","exitButton","Connections","svgWrapper","checkForCircularNodes","startNodeId","isCircular","walk","outputConnections","connectedTo","addConnection","newNodes","removeConnection","inputNode","removedInputPort","newInputNodeConnectionsInputs","newInputNode","outputNode","filteredOutputNodes","newOutputNode","getFilteredTransputs","newTransputs","removeConnections","removeNode","startNodes","deletedNode","reconcileNodes","initialNodes","context","nodesToDelete","nodesReducer","reconciledNodes","nodesObj","nodeType","defaultInputData","getDefaultData","currentInputData","dataObj","key","newInputData","newNode","getInitialNodes","defaultNodes","dNode","nodeNotAdded","inputType","obj2","action","circularBehavior","inputIsNotConnected","allowCircular","portId","cnxType","defaultNode","newNodeId","controlName","newData","connectNodesReducer","reducer","environment","state","setComment","comments","merge","toDelete","newComments","toastType","findIndex","incomingAction","Cache","LoopError","code","maxLoopsExceeded","RootEngine","resolveInputControls","fireNodeFunction","resetLoops","maxLoops","loops","checkLoops","getRootNode","roots","reduceRootInputs","callback","connection","resolveInputValues","inputConnections","getValueOfConnection","outputNodeType","inputValues","outputResult","rootNode","rootNodeId","controlValues","onlyResolveConnected","defaultContext","NodeEditor","initialComments","onCommentsChange","initialScale","hideComments","debug","useId","sideEffectToasts","setSideEffectToasts","useReducer","toastsReducer","commentsReducer","shouldRecalculateConnections","setShouldRecalculateConnections","stageReducer","recalculateConnections","useImperativeHandle","previousNodes","previousComments","debugWrapper","debugButton","console","log","JSON","stringify","dragWrapper","forwardRef","useRootEngine","engine","resolveRootNode"],"mappings":"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"}